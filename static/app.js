(()=>{(()=>{var We=[,()=>{window.up={version:"3.9.1"}},()=>{up.mockable=function(n){if(window.jasmine){let a=n.name,r={[a]:n},e=function(){return r[a].apply(this,arguments)};return e.mock=()=>spyOn(r,a),e}else return n}},()=>{up.util=function(){function n(){}function a(){return Promise.resolve()}function r(s){let c,y;return function(...W){return y?c:(y=!0,c=s.apply(this,W))}}function e(s,c){c=ge(c,{host:"cross-domain"});let y=L(s),W="";c.host==="cross-domain"&&(c.host=m(y)),c.host&&(W+=y.protocol+"//"+y.host);let{pathname:ie}=y;return c.trailingSlash===!1&&ie!=="/"&&(ie=ie.replace(/\/$/,"")),W+=ie,c.search!==!1&&(W+=y.search),c.hash!==!1&&(W+=y.hash),W}function t(s,c,y){return i(s,y)===i(c,y)}function i(s,c){if(s)return e(s,{hash:!1,trailingSlash:!1,...c})}function o(s){return s.endsWith("/")?[s,s.slice(0,-1)]:s.includes("/?")?[s,s.replace("/?","?")]:s.endsWith("/*")?[s,s.slice(0,-2),s.slice(0,-2)+"?*"]:s}let u=location.protocol,g=location.hostname;function m(s){if(I(s)&&s.indexOf("//")===-1)return!1;let c=L(s);return g!==c.hostname||u!==c.protocol}function L(s){if(s.pathname)return s;let c=document.createElement("a");return c.href=s,c}function N(s){return s?s.toUpperCase():"GET"}function X(s){return s!=="GET"&&s!=="HEAD"}function V(s){return I(s)?c=>c[s]:s}function J(s,c){if(s.length===0)return[];c=V(c);let y=[],W=0;for(let ie of s)y.push(c(ie,W++));return y}function R(s,c){let y=function(W,ie){return W[ie[0]]=ie[1],W};return J(s,c).reduce(y,{})}function U(s,c){let y=0;for(let W of s)c(W,y++)}function Q(s){return s===null}function ee(s){return s===void 0}let $=Be(ee);function P(s){return ee(s)||Q(s)}let E=Be(P);function v(s){return P(s)?!0:S(s)&&s[v.key]?s[v.key]():I(s)||q(s)?s.length===0:re(s)?Object.keys(s).length===0:!1}v.key="up.util.isBlank";function F(s,c=w){if(c(s))return s}let w=Be(v);function C(s){return typeof s=="function"}function I(s){return typeof s=="string"||s instanceof String}function Z(s){return typeof s=="boolean"||s instanceof Boolean}function te(s){return typeof s=="number"||s instanceof Number}function re(s){return typeof s=="object"&&!Q(s)&&(ee(s.constructor)||s.constructor===Object)}function S(s){let c=typeof s;return c==="object"&&!Q(s)||c==="function"}function B(s){return s instanceof Element}function _(s){return s instanceof RegExp}function x(s){return s instanceof Error}function G(s){return up.browser.canJQuery()&&s instanceof jQuery}function T(s){return!!(s&&(s.addEventListener||s[0]?.addEventListener))}function p(s){return S(s)&&C(s.then)}let{isArray:b}=Array;function H(s){return s instanceof FormData}function Y(s){return b(s)?s:ue(s)}function q(s){return b(s)||ae(s)||M(s)||G(s)||A(s)}function ae(s){return s instanceof NodeList}function A(s){return s instanceof HTMLCollection}function M(s){return Object.prototype.toString.call(s)==="[object Arguments]"}function K(s){return q(s)?s:P(s)?[]:[s]}function ne(s){return S(s)&&s[ne.key]?s=s[ne.key]():q(s)?s=ue(s):re(s)&&(s=Object.assign({},s)),s}function ue(s){return Array.prototype.slice.call(s)}ne.key="up.util.copy",Date.prototype[ne.key]=function(){return new Date(+this)};function de(...s){return Object.assign({},...s)}function me(...s){let c={};for(let y of s)if(y)for(let W in y){let ie=y[W];$(ie)&&(c[W]=ie)}return c}function ge(s,c){return c?de(c,s):s?ne(s):{}}function xe(s,c){let y=Me(s);return $(s[0])&&(y=ne(y),y[c]=s[0]),y}function ke(s,c){c=V(c);let y;for(let W of s)if(c(W)){y=W;break}return y}function be(s,c){return!!Ae(s,c)}function Ae(s,c){c=V(c);let y=0;for(let W of s){let ie=c(W,y++);if(ie)return ie}}function ye(s,c){c=V(c);let y=!0,W=0;for(let ie of s)if(!c(ie,W++)){y=!1;break}return y}function Se(s){return _e(s,E)}function Re(s){return h(s,E)}function Oe(s){return s.length<2?s:Array.from(new Set(s))}function ve(s,c){if(s.length<2)return s;c=V(c);let y=new Set;return _e(s,function(W,ie){let he=c(W,ie);return y.has(he)?!1:(y.add(he),!0)})}function _e(s,c){c=V(c);let y=[];return U(s,function(W,ie){if(c(W,ie))return y.push(W)}),y}function Ee(s,c){return c=Be(V(c)),_e(s,c)}function Te(s,c){return _e(s,y=>D(c,y))}function Ie(s,c){return setTimeout(c,s)}function d(s){return setTimeout(s)}function f(s){return s[s.length-1]}function D(s,c){return(s.indexOf||Array.prototype.indexOf).call(s,c)>=0}function j(s,c){return ye(c,y=>D(s,y))}function se(s,c){let y=l(s,Object.keys(c));return Fe(c,y)}function l(s,c){let y={};for(let W of c)W in s&&(y[W]=s[W]);return y}function h(s,c){c=V(c);let y={};for(let W in s){let ie=s[W];c(ie,W,s)&&(y[W]=s[W])}return y}function k(s,c){return h(s,(y,W)=>!D(c,W))}function z(){return new Promise(n)}function oe(s,c){let y=s.indexOf(c);if(y>=0)return s.splice(y,1),c}function pe(s,...c){return C(s)?s(...c):s}function ce(s,c,...y){return s=pe(s,...y),s==="auto"&&(s=pe(c,...y)),s}let le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};function fe(s){return s.replace(/[&<>"']/g,c=>le[c])}function we(s){return s.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function Ce(s,c){let y=s[c];return delete s[c],y}function Le(s,c,y){return s[y]=Ce(s,c)}function De(s,c){if(c(f(s)))return s.pop()}function je(s){return De(s,C)}function Me(s){return De(s,re)||{}}function Ue(s){return s}function Qe(s){return s=Se(s),(...c)=>J(s,y=>y(...c))}function Xe(s){let c=[];for(let y of s)q(y)?c.push(...y):c.push(y);return c}function Ye(s,c){return Xe(J(s,c))}function Je(s,c=Ue){return s.then(c,c)}function qe(){let s,c,y=new Promise(function(W,ie){s=W,c=ie});return y.resolve=s,y.reject=c,y}function $e(s){return Object.prototype.hasOwnProperty(s)}function Fe(s,c){if(s?.valueOf&&(s=s.valueOf()),c?.valueOf&&(c=c.valueOf()),typeof s!=typeof c)return!1;if(q(s)&&q(c))return Ve(s,c);if(S(s)&&s[Fe.key])return s[Fe.key](c);if(re(s)&&re(c)){let y=Object.keys(s),W=Object.keys(c);return Ve(y,W)?ye(y,ie=>Fe(s[ie],c[ie])):!1}else return s===c}Fe.key="up.util.isEqual";function Ve(s,c){return s.length===c.length&&ye(s,(y,W)=>Fe(y,c[W]))}let Ke={"space/or":/\s+(?:or\s+)?/,or:/\s+or\s+/,comma:/\s*,\s*/};function et(s,c={}){if(I(s)){if(s=s.trim(),c.json&&/^\[.*]$/.test(s))return JSON.parse(s);{let y=c.separator||"space/or",W=Ke[y];return s.split(W)}}else return K(s)}function tt(s,...c){return c[0]instanceof s?c[0]:new s(...c)}let rt=0;function it(){return rt++}function nt(s){return ne(s).reverse()}function st(s,c,y){return s===c?y:s}function ot(s,c){let y={};for(let W in s)y[c(W)]=s[W];return y}function at(s){return s.replace(/[A-Z]/g,c=>"-"+c.toLowerCase())}function ut(s){return s[0].toLowerCase()+s.slice(1)}function lt(s){return s[0].toUpperCase()+s.slice(1)}function ct(s,c,y){for(let W of c)Object.defineProperty(s,W,{get(){let ie=y.call(this),he=ie[W];return C(he)&&(he=he.bind(ie)),he},set(ie){let he=y.call(this);he[W]=ie}})}function Ne(s,c="%o"){let y;if(c==="%c")return"";if(c==="%s"&&E(s)&&(s=s.toString()),I(s))y=s.trim().replace(/[\n\r\t ]+/g," "),c==="%o"&&(y=JSON.stringify(y));else if(ee(s))y="undefined";else if(te(s)||C(s))y=s.toString();else if(b(s))y=`[${J(s,Ne).join(", ")}]`;else if(G(s))y=`$(${J(s,Ne).join(", ")})`;else if(B(s)){y=`<${s.tagName.toLowerCase()}`;for(let ie of["id","up-id","name","class"]){let he=s.getAttribute(ie);he&&(y+=` ${ie}="${he}"`)}y+=">"}else if(_(s)||x(s))y=s.toString();else try{y=JSON.stringify(s)}catch(ie){if(ie.name==="TypeError")y="(circular structure)";else throw ie}return y.length>200&&(y=`${y.substr(0,200)}\u2026${f(y)}`),y}let pt=/%[oOdisfc]/g;function ht(s,...c){return s.replace(pt,y=>Ne(c.shift(),y))}function Be(s){return function(...c){return!s(...c)}}function ft(s){if(s.error)throw s.error;return s.value}function dt(s,c,y){try{return{value:s.apply(c,y)}}catch(W){return{error:W}}}function mt(s,c){for(let y in c){let ie=Object.getOwnPropertyDescriptor(s,y).value,he=function(...Ze){var ze;let Pe=this[ze=`__${y}MemoizeCache`]||(this[ze]={}),Ge=JSON.stringify(Ze);return Pe[Ge]||(Pe[Ge]=dt(ie,this,Ze)),ft(Pe[Ge])};s[y]=he}}function gt(s){let c=JSON.stringify(s);return _t(c)}function _t(s){let c=y=>"\\u"+y.charCodeAt(0).toString(16).padStart(4,"0");return s.replace(/[^\x00-\x7F]/g,c)}function bt(s,c={}){let y=Object.create(s);return Object.assign(y,c),y}return{parseURL:L,normalizeURL:e,matchableURL:i,matchableURLPatternAtom:o,matchURLs:t,normalizeMethod:N,methodAllowsPayload:X,copy:ne,merge:de,mergeDefined:me,options:ge,parseArgIntoOptions:xe,each:U,map:J,flatMap:Ye,mapObject:R,findResult:Ae,some:be,every:ye,find:ke,filter:_e,reject:Ee,intersect:Te,compact:Se,compactObject:Re,uniq:Oe,uniqBy:ve,last:f,isNull:Q,isDefined:$,isUndefined:ee,isGiven:E,isMissing:P,isPresent:w,isBlank:v,presence:F,isObject:S,isFunction:C,isString:I,isBoolean:Z,isNumber:te,isElement:B,isJQuery:G,isElementish:T,isPromise:p,isOptions:re,isArray:b,isFormData:H,isList:q,isRegExp:_,timer:Ie,contains:D,containsAll:j,objectContains:se,toArray:Y,pick:l,pickBy:h,omit:k,unresolvablePromise:z,remove:oe,memoize:r,pluckKey:Ce,renameKey:Le,extractOptions:Me,extractCallback:je,noop:n,asyncNoop:a,identity:Ue,escapeHTML:fe,escapeRegExp:we,sequence:Qe,evalOption:pe,evalAutoOption:ce,flatten:Xe,newDeferred:qe,always:Je,isBasicObjectProperty:$e,isCrossOrigin:m,task:d,isEqual:Fe,parseTokens:et,wrapList:K,wrapValue:tt,uid:it,upperCaseFirst:lt,lowerCaseFirst:ut,delegate:ct,reverse:nt,camelToKebabCase:at,replaceValue:st,sprintf:ht,renameKeys:ot,memoizeMethod:mt,safeStringifyJSON:gt,variant:bt}}()},()=>{up.error=function(){function n(...g){throw new up.Error(g)}function a(g){return typeof g!="object"||g.name!=="AbortError"&&!(g instanceof up.RenderResult)&&!(g instanceof up.Response)}function r(g){return g.catch(t)}function e(g){try{return g()}catch(m){t(m)}}function t(g){if(a(g))throw g}function i(g){console.error("Uncaught %o",g);let m=new ErrorEvent("error",{error:g,message:"Uncaught "+g});window.dispatchEvent(m)}function o(g){try{return g()}catch(m){i(m)}}function u(g){return(...m)=>o(()=>g(...m))}return{fail:n,throwCritical:t,muteUncriticalRejection:r,muteUncriticalSync:e,guard:o,guardFn:u}}(),up.fail=up.error.fail},()=>{up.migrate={config:{}}},()=>{up.browser=function(){let n=up.util;function a(u){u.submit()}function r(){return up.protocol.initialRequestMethod()==="GET"}function e(){return!!window.jQuery}let t=n.memoize(()=>CSS.supports("selector(:has(*))"));function i(u){let g=document.cookie.match(new RegExp(u+"=(\\w+)"))?.[1];if(g)return document.cookie=u+"=;Max-Age=0;Path=/",g}function o(u){if(!(!u.confirm||window.confirm(u.confirm)))throw new up.Aborted("User canceled action");return!0}return{submitForm:a,canPushState:r,canJQuery:e,assertConfirmed:o,popCookie:i,canHasSelector:t}}()},(n,a,r)=>{r(8),up.element=function(){let e=up.util;function t(...l){let h=l.pop();return(l[0]||document).querySelector(h)}function i(l,h){let k=[];return l.matches(h)&&k.push(l),k.push(...l.querySelectorAll(h)),k}function o(l,h){let k=m(h);return Node.prototype.contains.call(l,k)}function u(l,h){return l.parentNode?.closest(h)}function g(l,h){return L(l.closest(h),i(l,h))}function m(...l){let h=l.pop();return e.isElement(h)?h:e.isString(h)?t(...l,h):e.isList(h)?(h.length>1&&up.fail("up.element.get(): Cannot cast multiple elements (%o) to a single element",h),h[0]):h}function L(...l){return e.flatMap(l,N)}function N(l){return e.isString(l)?document.querySelectorAll(l):e.wrapList(l)}function X(l){l.setAttribute("hidden","")}function V(l){l.removeAttribute("hidden"),l.style.display==="none"&&(l.style.display="")}function J(l,h){h==null&&(h=!_e(l)),(h?V:X)(l)}function R(l,h,k,z){return z==null&&(z=!l.hasAttribute(h)),z?l.setAttribute(h,k):l.removeAttribute(h)}function U(l,h){for(let k in h){let z=h[k];e.isGiven(z)?l.setAttribute(k,z):l.removeAttribute(k)}}function Q(l,h){let k={};for(let z of Object.keys(h))k[z]=l.getAttribute(z);return U(l,h),()=>U(l,k)}function ee(l){let h="meta"+re("name",l);return t(h)?.getAttribute("content")}function $(l,h){l.insertAdjacentElement("beforebegin",h)}function P(l,h={}){let{includePath:k}=E(l),z,oe,pe;for(let ce of k){let{tagName:le,id:fe,classNames:we,attributes:Ce}=ce;(!le||le==="*")&&(le="div"),oe=document.createElement(le),z||(z=oe),fe&&(oe.id=fe);for(let Le of we)oe.classList.add(Le);for(let Le in Ce){let De=Ce[Le];oe.setAttribute(Le,De||"")}pe?.appendChild(oe),pe=oe}for(let ce in h){let le=h[ce];if(ce==="class")for(let fe of e.wrapList(le))z.classList.add(fe);else ce==="style"?ve(z,le):ce==="text"?z.textContent=le:ce==="content"?z.innerHTML=le:z.setAttribute(ce,le)}return z}function E(l){let h,k=l.replace(/:not\([^)]+\)/,function(le){return h=le,""}),[z,oe]=w(k);return{includePath:z.split(/[ >]+/).map(function(le){let fe={tagName:null,classNames:[],id:null,attributes:{}};return le=le.replace(/^[\w-*]+/,function(we){return fe.tagName=we,""}),le=le.replace(/#([\w-]+)/,function(we,Ce){return fe.id=Ce,""}),le=le.replace(/\.([\w-]+)/g,function(we,Ce){return fe.classNames.push(Ce),""}),oe.length&&(le=F(le,function({name:we}){return fe.attributes[we]=oe.shift(),""})),le&&up.fail("Cannot parse selector: "+l),fe}),includeRaw:k,excludeRaw:h}}let v=/\[([\w-]+)(?:([~|^$*]?=)(["'])?([^\3\]]*?)\3)?]/g;function F(l,h){return l.replace(v,function(k,z,oe,pe,ce){return ce&&(ce=ce.replace(/\\([\\"'])/,"$1")),h({name:z,operator:oe,quote:pe,value:ce})})}function w(l){let h=[];return l=F(l,function({name:k,value:z}){return h.push(z),`[${k}]`}),[l,h]}function C(l,...h){let k,z,oe=e.extractOptions(h);h.length===2?[k,z]=h:(k="beforeend",z=h[0]);let pe=P(z,oe);return l.insertAdjacentElement(k,pe),pe}let I=["HTML","BODY","HEAD","TITLE"],Z=up.mockable(l=>l.matches(I.join()));function te(l){return l.tagName.toLowerCase()}function re(l,h){return e.isGiven(h)?(h=h.replace(/"/g,'\\"'),`[${l}="${h}"]`):`[${l}]`}function S(l){return l.match(/^[a-z][a-z0-9\-_]*$/i)?`#${l}`:re("id",l)}function B(l){return l=l.replace(/[^\w-]/g,"\\$&"),`.${l}`}function _(l){return new DOMParser().parseFromString(l,"text/html")}function x(l){let h=G(l.outerHTML);l.replaceWith(h)}function G(l){let h=document.createRange();h.setStart(document.body,0);let z=h.createContextualFragment(l.trim()).childNodes;if(z.length!==1)throw new Error("HTML must have a single root element");return z[0]}function T(){return document.documentElement}function p(l){l.offsetHeight}function b(l){let h=be(l,{transition:"none"});return p(l),h}function H(l){let h=l["transition-property"],k=l["transition-duration"];return!(h==="none"||h==="all"&&k===0)}function Y(l){let h=l.getBoundingClientRect();l.style.position="absolute";let k=l.offsetParent.getBoundingClientRect();ve(l,{left:h.left-Se(l,"margin-left")-k.left+"px",top:h.top-Se(l,"margin-top")-k.top+"px",right:"",bottom:""})}function q(l,h){for(let k in h)ae(l,k,h[k])}function ae(l,h,k){e.isMissing(l.getAttribute(h))&&l.setAttribute(h,k)}function A(l){K(function(){let h=l.parentNode,k=e.toArray(l.childNodes);e.each(k,z=>h.insertBefore(z,l)),h.removeChild(l)})}function M(l){let h,k=document.createElement("up-wrapper");for(;h=l.firstChild;)k.appendChild(h);return l.appendChild(k),k}function K(l){let h=document.activeElement;try{return l()}finally{h&&h!==document.activeElement&&h.focus({preventScroll:!0})}}function ne(l,h){let k=l.getAttribute(h);return e.replaceValue(k,null,void 0)}function ue(l,h,k){if(!l.hasAttribute(h))return;let z=ne(l,h);switch(z){case"false":return!1;case"true":case"":case h:return!0;default:return k?z:!0}}function de(l,h,k=!0){let z=ue(l,h,!0);return z===!0?k:z}function me(l,h){let k=l.getAttribute(h);if(k&&(k=k.replace(/_/g,""),k.match(/^-?[\d.]+$/)))return parseFloat(k)}function ge(l,h){let k=l.getAttribute?.(h)?.trim();if(k)return JSON.parse(k)}function xe(l,h,{exposedKeys:k=[],mainKey:z="event"}={}){let oe=l.getAttribute(h);if(oe){let pe=up.NonceableCallback.fromString(oe).toFunction(z,...k);return function(ce){let le=Object.values(e.pick(ce,k));return pe.call(l,ce,...le)}}}function ke(l,h,k=ne){let z=l.closest("["+h+"]");if(z)return k(z,h)}function be(l,h){let k=Re(l,Object.keys(h));return ve(l,h),()=>ve(l,k)}function Ae(l,h){return l.classList.add(h),()=>l.classList.remove(h)}function ye(l,h){let k=window.getComputedStyle(l);return Oe(k,h)}function Se(l,h){let k=ye(l,h);if(e.isPresent(k))return parseFloat(k)}function Re(l,h){let{style:k}=l;return Oe(k,h)}function Oe(l,h){return up.migrate.loaded&&(h=up.migrate.fixStyleProps(h)),e.isString(h)?l.getPropertyValue(h):e.mapObject(h,k=>[k,l.getPropertyValue(k)])}function ve(l,h,k=""){if(up.migrate.loaded&&(h=up.migrate.fixStyleProps(h,k)),e.isString(h))l.setAttribute("style",h);else{let{style:z}=l;for(let oe in h){let pe=h[oe];z.setProperty(oe,pe+k)}}}function _e(l){return!!(l.offsetWidth||l.offsetHeight||l.getClientRects().length)}function Ee(l){return/^up-/.test(l)}function Te(l){let h=e.filter(l.getAttributeNames(),Ee);return e.mapObject(h,k=>[k,l.getAttribute(k)])}function Ie(l){return e.filter(l.classList.values(),Ee)}function d(l){up.browser.canJQuery()&&jQuery(l).remove()}function f(l){return!l.children.length>0&&!l.innerText.trim()}function D(l){return`[${l}*="//"]:not([${l}*="//${location.host}/"])`}function j(l,{margin:h=0}={}){let k=up.Rect.fromElement(l);return k.grow(h),k.bottom>0&&k.top<window.innerHeight&&k.right>0&&k.left<window.innerWidth}function se(l,h){let k=`:is(${l.join()})`;return e.isPresent(h)&&(k+=`:not(${h.join()})`),k}return{subtree:i,contains:o,closestAttr:ke,ancestor:u,around:g,get:m,list:L,toggle:J,hide:X,show:V,metaContent:ee,insertBefore:$,createFromSelector:P,setAttrs:U,setTemporaryAttrs:Q,affix:C,idSelector:S,classSelector:B,isSingleton:Z,attrSelector:re,tagName:te,createBrokenDocumentFromHTML:_,fixParserDamage:x,createFromHTML:G,get root(){return T()},paint:p,concludeCSSTransition:b,hasCSSTransition:H,fixedToAbsolute:Y,setMissingAttrs:q,setMissingAttr:ae,unwrap:A,wrapChildren:M,attr:ne,booleanAttr:ue,numberAttr:me,jsonAttr:ge,callbackAttr:xe,booleanOrStringAttr:de,setTemporaryStyle:be,style:ye,styleNumber:Se,inlineStyle:Re,setStyle:ve,isVisible:_e,upAttrs:Te,upClasses:Ie,toggleAttr:R,addTemporaryClass:Ae,cleanJQuery:d,parseSelector:E,isEmpty:f,crossOriginSelector:D,isIntersectingWindow:j,unionSelector:se}}()},(n,a,r)=>{"use strict";r.r(a)},()=>{up.Error=class extends window.Error{constructor(a,r={}){Array.isArray(a)&&(a=up.util.sprintf(...a)),super(a);let e="up."+this.constructor.name;Object.assign(this,{name:e},r)}}},()=>{up.NotImplemented=class extends up.Error{}},()=>{up.Aborted=class extends up.Error{constructor(a){super(a,{name:"AbortError"})}}},()=>{up.CannotMatch=class extends up.Error{}},()=>{up.CannotParse=class extends up.Error{}},()=>{up.CannotTarget=class extends up.Error{}},()=>{up.Offline=class extends up.Error{}},()=>{let n=up.util;up.Record=class{keys(){throw"Return an array of keys"}defaults(r){return{}}constructor(r){Object.assign(this,this.defaults(r),this.attributes(r))}attributes(r=this){return n.pick(r,this.keys())}[n.copy.key](){return n.variant(this)}[n.isEqual.key](r){return this.constructor===r.constructor&&n.isEqual(this.attributes(),r.attributes())}}},()=>{let n=up.util,a=up.element;up.Config=class{constructor(e=()=>({})){this._blueprintFn=e,this.reset(),document.addEventListener("up:framework:reset",()=>this.reset())}reset(){Object.assign(this,this._blueprintFn())}matches(e,t){return e.matches(this.selector(t))}selector(e){let t=this[e],i=this["no"+n.upperCaseFirst(e)];return a.unionSelector(t,i)}selectorFn(e){return()=>this.selector(e)}}},()=>{let n="up.log.enabled",a=!1;try{a=!!sessionStorage?.getItem(n)}catch{}up.LogConfig=class extends up.Config{constructor(){super(()=>({banner:!0,format:!0}))}get enabled(){return a}set enabled(e){a=e;try{sessionStorage?.setItem(n,e?"1":"")}catch{}}}},()=>{let n=up.util,a=up.element;up.OptionsParser=class{constructor(e,t,i={}){this._options=t,this._element=e,this._parserOptions=i,this._fail=i.fail,this._closest=i.closest,this._attrPrefix=i.attrPrefix||"up-",this._defaults=i.defaults||{}}string(e,t){this.parse(a.attr,e,t)}boolean(e,t){this.parse(a.booleanAttr,e,t)}number(e,t){this.parse(a.numberAttr,e,t)}booleanOrString(e,t){this.parse(a.booleanOrStringAttr,e,t)}json(e,t){this.parse(a.jsonAttr,e,t)}callback(e,t={}){let i=(o,u)=>a.callbackAttr(o,u,t);this.parse(i,e,t)}parse(e,t,i={}){let o=n.wrapList(i.attr??this._attrNameForKey(t)),u=this._options[t];for(let L of o)u??(u=this._parseFromAttr(e,this._element,L));u??(u=i.default??this._defaults[t]);let g=i.normalize;g&&(u=g(u)),n.isDefined(u)&&(this._options[t]=u);let m;if(this._fail&&(m=up.fragment.failKey(t))){let L=n.compact(n.map(o,N=>this._deriveFailAttrName(N)));this.parse(e,m,{...i,attr:L})}}include(e){let t=e(this._element,this._options,this._parserOptions);Object.assign(this._options,t)}_parseFromAttr(e,t,i){return this._closest?a.closestAttr(t,i,e):e(t,i)}_deriveFailAttrName(e){return this._deriveFailAttrNameForPrefix(e,this._attrPrefix+"on-")||this._deriveFailAttrNameForPrefix(e,this._attrPrefix)}_deriveFailAttrNameForPrefix(e,t){if(e.startsWith(t))return`${t}fail-${e.substring(t.length)}`}_attrNameForKey(e){return`${this._attrPrefix}${n.camelToKebabCase(e)}`}}},()=>{let n=up.util;up.FIFOCache=class{constructor({capacity:r=10,normalizeKey:e=n.identity}={}){this._map=new Map,this._capacity=r,this._normalizeKey=e}get(r){return r=this._normalizeKey(r),this._map.get(r)}set(r,e){if(this._map.size===this._capacity){let t=this._map.keys().next().value;this._map.delete(t)}r=this._normalizeKey(r),this._map.set(r,e)}clear(){this._map.clear()}}},()=>{up.Rect=class extends up.Record{keys(){return["left","top","width","height"]}get bottom(){return this.top+this.height}get right(){return this.left+this.width}grow(a){this.left-=a,this.top-=a,this.width+=a*2,this.height+=a*2}static fromElement(a){return new this(a.getBoundingClientRect())}}},()=>{let n=up.element,a="up-scrollbar-away";up.BodyShifter=class{constructor(){this._anchoredElements=new Set,this._stack=0,this._cleaners=[]}lowerStack(){--this._stack===0&&this._unshiftNow()}raiseStack(){++this._stack===1&&this._shiftNow()}onAnchoredElementInserted(e){return this._anchoredElements.add(e),this._shiftElement(e,"right"),()=>this._anchoredElements.delete(e)}_isShifted(){return this._rootScrollbarWidth&&this._stack>0}_shiftNow(){this._rootScrollbarWidth=up.viewport.rootScrollbarWidth(),this._cleaners.push(n.setTemporaryStyle(n.root,{"--up-scrollbar-width":this._rootScrollbarWidth+"px"})),this._shiftElement(document.body,"padding-right");for(let e of this._anchoredElements)this._shiftElement(e,"right")}_shiftElement(e,t){if(!this._isShifted())return;let i=n.style(e,t);this._cleaners.push(n.setTemporaryStyle(e,{["--up-original-"+t]:i}),n.addTemporaryClass(e,a))}_unshiftNow(){let e;for(;e=this._cleaners.pop();)e()}}},()=>{let n=up.util;up.Change=class{constructor(r){this.options=r}execute(){throw new up.NotImplemented}onFinished(r){return this.options.onFinished?.(r)}improveHistoryValue(r,e){return r===!1||n.isString(r)?r:e}deriveFailOptions(){return up.RenderOptions.deriveFailOptions(this.options)}}},()=>{let n=up.util,a=up.element;up.Change.Addition=class extends up.Change{constructor(e){super(e),this._acceptLayer=e.acceptLayer,this._dismissLayer=e.dismissLayer,this._eventPlans=e.eventPlans||[],this._response=e.response}handleLayerChangeRequests(){this.layer.isOverlay()&&(this.tryAcceptLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryAcceptForLocation(this.responseOption()),this.abortWhenLayerClosed(),this.tryDismissLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryDismissForLocation(this.responseOption()),this.abortWhenLayerClosed()),this.layer.asCurrent(()=>{for(let e of this._eventPlans)up.emit({...e,...this.responseOption()}),this.abortWhenLayerClosed()})}tryAcceptLayerFromServer(){n.isDefined(this._acceptLayer)&&this.layer.isOverlay()&&this.layer.accept(this._acceptLayer,this.responseOption())}tryDismissLayerFromServer(){n.isDefined(this._dismissLayer)&&this.layer.isOverlay()&&this.layer.dismiss(this._dismissLayer,this.responseOption())}abortWhenLayerClosed(e=this.layer){if(e.isClosed())throw new up.Aborted("Layer was closed")}setSource({oldElement:e,newElement:t,source:i}){i==="keep"&&(i=e&&up.fragment.source(e)),i&&a.setMissingAttr(t,"up-source",up.fragment.normalizeSource(i))}setTime({newElement:e,time:t}){a.setMissingAttr(e,"up-time",t?t.toUTCString():!1)}setETag({newElement:e,etag:t}){a.setMissingAttr(e,"up-etag",t||!1)}setReloadAttrs(e){this.setSource(e),this.setTime(e),this.setETag(e)}responseOption(){return{response:this._response}}executeSteps(e,t,i){return new up.Change.UpdateSteps({steps:e,noneOptions:i}).execute(t)}}},()=>{var n;let a=up.util;up.RenderJob=(n=class{constructor(e){this.options=e}execute(){return this._rendered=this._executePromise(),this}async _executePromise(){try{this._guardRender(),this.options=up.RenderOptions.preprocess(this.options);let e=await this._getChange().execute();return this._handleResult(e),e}catch(e){throw this._handleResult(e)||this._handleError(e),e}}_handleResult(e){if(e instanceof up.RenderResult){let{onRendered:t,onFinished:i}=e.options;e.none||up.error.guard(()=>t?.(e));let o=function(u){up.error.guard(()=>i?.(u))};return this.finished.then(o,a.noop),!0}}_handleError(e){let t=e instanceof up.Aborted?"Rendering was aborted":"Error while rendering";up.puts("up.render()",`${t}: ${e.name}: ${e.message}`),up.error.guard(()=>this.options.onError?.(e))}get finished(){return this._awaitFinished()}async _awaitFinished(){try{return await(await this._rendered).finished}catch(e){throw e instanceof up.RenderResult?await e.finished:e}}_getChange(){if(this.options.url){let e=t=>this._handleAbortOption(t);return new up.Change.FromURL({...this.options,onRequest:e})}else if(this.options.response){let e=()=>this._handleAbortOption(null);return new up.Change.FromResponse({...this.options,onRender:e})}else{let e=()=>this._handleAbortOption(null);return new up.Change.FromContent({...this.options,onRender:e})}}_guardRender(){up.browser.assertConfirmed(this.options);let e=a.pluckKey(this.options,"guardEvent");if(e&&(e.renderOptions=this.options,up.emit(e,{target:this.options.origin}).defaultPrevented))throw new up.Aborted(`Rendering was prevented by ${e.type} listener`);up.RenderOptions.assertContentGiven(this.options)}_handleAbortOption(e){let{abort:t}=this.options;if(!t||!up.network.isBusy())return;let{fragments:i,layer:o,origin:u,newLayer:g}=this._getChange().getPreflightProps(),m={except:e,logOnce:["up.render()","Change with { abort } option will abort other requests"],newLayer:g,origin:u};t==="target"?up.fragment.abort(i,m):t==="layer"?up.fragment.abort({...m,layer:o}):t==="all"||t===!0?up.fragment.abort({...m,layer:"any"}):a.isFunction(t)?t(m):up.fragment.abort(t,{...m,layer:o})}},a.delegate(n.prototype,["then","catch","finally"],function(){return this._rendered}),a.memoizeMethod(n.prototype,{_awaitFinished:!0,_getChange:!0}),n)},()=>{up.Change.Removal=class extends up.Change{}},()=>{up.Change.DestroyFragment=class extends up.Change.Removal{constructor(a){super(a),this._layer=up.layer.get(a)||up.layer.current,this._element=this.options.element,this._animation=this.options.animation,this._log=this.options.log}execute(){this._parent=this._element.parentNode,up.fragment.markAsDestroying(this._element),up.motion.willAnimate(this._element,this._animation,this.options)?this._destroyAfterAnimation():this._destroyNow()}async _destroyAfterAnimation(){this._emitDestroyed(),await this._animate(),this._wipe(),this.onFinished()}_destroyNow(){this._wipe(),this._emitDestroyed(),this.onFinished()}_animate(){return up.motion.animate(this._element,this._animation,this.options)}_wipe(){this._layer.asCurrent(()=>{up.fragment.abort(this._element),up.script.clean(this._element,{layer:this._layer}),up.element.cleanJQuery(this._element),this._element.remove()})}_emitDestroyed(){up.fragment.emitDestroyed(this._element,{parent:this._parent,log:this._log})}}},()=>{let n=up.util;up.Change.OpenLayer=class extends up.Change.Addition{constructor(r){super(r),this.target=r.target,this._origin=r.origin,this._baseLayer=r.baseLayer}getPreflightProps(){return{mode:this.options.mode,context:this._buildLayer().context,origin:this.options.origin,target:this.target,layer:this._baseLayer,fragments:n.compact([up.fragment.get(":main",{layer:this._baseLayer})]),newLayer:!0}}execute(r,e){this.responseDoc=r,this._matchPostflight(),e(),this._createOverlay();let t=this.layer.on("up:layer:accepting up:layer:dimissing",this._renderOtherLayers.bind(this));try{return this._renderOverlayContent(),this._renderOtherLayers(),up.RenderResult.both(this._newOverlayResult,this._otherLayersResult)}finally{t()}}_matchPostflight(){if(this.target===":none"?this._content=document.createElement("up-none"):this._content=this.responseDoc.select(this.target),!this._content||this._baseLayer.isClosed())throw new up.CannotMatch}_createOverlay(){up.puts("up.render()",`Opening element "${this.target}" in new overlay`),this._assertOpenEventEmitted(),this.layer=this._buildLayer(),this._baseLayer.peel({history:!this.layer.history}),up.layer.stack.push(this.layer),this.layer.createElements(),this.layer.setupHandlers()}_renderOverlayContent(){this._handleHistory(),this.handleLayerChangeRequests(),this.responseDoc.commitElement(this._content),this.layer.setContent(this._content),this.setReloadAttrs({newElement:this._content,source:this.options.source}),this.responseDoc.finalizeElement(this._content),this._newOverlayResult=new up.RenderResult({layer:this.layer,fragments:[this._content],target:this.target}),up.hello(this.layer.element,{...this.options,layer:this.layer}),this._handleScroll(),this._newOverlayResult.finished=this._finish(),this.layer.opening=!1,this._emitOpenedEvent(),this.abortWhenLayerClosed()}_renderOtherLayers(){if(this._otherLayersResult)return;let r=this._getHungrySteps().other;this._otherLayersResult=this.executeSteps(r,this.responseDoc)}async _finish(){return await this.layer.startOpenAnimation(),this.abortWhenLayerClosed(),this._handleFocus(),this._newOverlayResult}_buildLayer(){let r={...this.options,opening:!0},e=t=>this.options=up.RenderOptions.finalize(t);return up.layer.build(r,e)}_handleHistory(){var e;this.layer.history==="auto"&&(this.layer.history=up.fragment.hasAutoHistory([this._content],this.layer));let{parent:r}=this.layer;(e=this.layer).history&&(e.history=r.history),r.saveHistory(),this.layer.updateHistory(this.options)}_handleFocus(){this._baseLayer.overlayFocus?.moveToBack(),this.layer.overlayFocus.moveToFront(),new up.FragmentFocus({fragment:this._content,layer:this.layer,autoMeans:["autofocus","layer"],inputDevice:this.options.inputDevice}).process(this.options.focus)}_handleScroll(){let r={...this.options,fragment:this._content,layer:this.layer,autoMeans:["hash","layer"]};new up.FragmentScrolling(r).process(this.options.scroll)}_assertOpenEventEmitted(){up.event.assertEmitted("up:layer:open",{origin:this._origin,baseLayer:this._baseLayer,layerOptions:this.options,log:"Opening new overlay"})}_emitOpenedEvent(){this.layer.emit("up:layer:opened",{origin:this._origin,callback:this.layer.callback("onOpened"),log:`Opened new ${this.layer}`})}_getHungrySteps(){return up.radio.hungrySteps(this._getEffectiveRenderOptions())}_getEffectiveRenderOptions(){return{...this.options,layer:this.layer,history:this.layer.history}}}},()=>{var n;let a=up.util;up.Change.UpdateLayer=(n=class extends up.Change.Addition{constructor(e){e=up.RenderOptions.finalize(e),super(e),this.layer=e.layer,this.target=e.target,this._context=e.context,this._steps=up.fragment.parseTargetSteps(this.target,this.options)}getPreflightProps(){return this._matchPreflight(),{layer:this.layer,mode:this.layer.mode,context:a.merge(this.layer.context,this._context),origin:this.options.origin,target:this._bestPreflightSelector(),fragments:this._getFragments(),newLayer:!1}}_bestPreflightSelector(){return this._matchPreflight(),up.fragment.targetForSteps(this._steps)}_getFragments(){return this._matchPreflight(),a.map(this._steps,"oldElement")}execute(e,t){this.responseDoc=e,this._matchPostflight(),t();let i=this.layer.on("up:layer:accepting up:layer:dimissing",this._renderOtherLayers.bind(this));try{return this._renderCurrentLayer(),this._renderOtherLayers(),up.RenderResult.both(this._currentLayerResult,this._otherLayersResult)}finally{i()}}_renderCurrentLayer(){this._steps.length&&up.puts("up.render()",`Updating "${this._bestPreflightSelector()}" in ${this.layer}`),this._setScrollAndFocusOptions(),this.options.saveScroll&&up.viewport.saveScroll({layer:this.layer}),this.options.saveFocus&&up.viewport.saveFocus({layer:this.layer}),this.options.peel&&this.layer.peel({history:!this._hasHistory()}),this.options.abort!==!1&&up.fragment.abort(this._getFragments(),{reason:"Fragment is being replaced"}),Object.assign(this.layer.context,this._context),this._hasHistory()&&this.layer.updateHistory(this.options),this.handleLayerChangeRequests(),this._currentLayerResult=this.executeSteps(this._steps,this.responseDoc,this.options)}_renderOtherLayers(){if(this._otherLayersResult)return;let e=this._getHungrySteps().other;this._otherLayersResult=this.executeSteps(e,this.responseDoc)}_matchPreflight(){this._matchOldElements(),this._compressNestedSteps()}_matchPostflight(){this._matchOldElements(),this._addHungryStepsOnCurrentLayer(),this._compressNestedSteps(),this._matchNewElements()}_addHungryStepsOnCurrentLayer(){this._steps.push(...this._getHungrySteps().current)}_matchOldElements(){this._steps=this._steps.filter(e=>{let t=new up.FragmentFinder(a.pick(e,["selector","origin","layer","match","preferOldElements"]));if(e.oldElement||(e.oldElement=t.find()),e.oldElement)return!0;if(!e.maybe)throw new up.CannotMatch})}_matchNewElements(){this._steps=this.responseDoc.selectSteps(this._steps)}_compressNestedSteps(){this._steps=up.fragment.compressNestedSteps(this._steps)}_getHungrySteps(){return up.radio.hungrySteps(this._getEffectiveRenderOptions())}_setScrollAndFocusOptions(){let e=up.FocusCapsule.preserve(this.layer);this._steps.forEach((t,i)=>{t.focusCapsule=e,i>0&&(t.scroll=!1,t.focus=!1)})}_hasHistory(){return a.evalAutoOption(this.options.history,this._hasAutoHistory.bind(this))}_hasAutoHistory(){let e=a.map(this._steps,"oldElement");return up.fragment.hasAutoHistory(e,this.layer)}_getEffectiveRenderOptions(){return{...this.options,layer:this.layer,history:this._hasHistory()}}},a.memoizeMethod(n.prototype,{_matchPreflight:!0,_matchOldElements:!0,_hasHistory:!0,_getHungrySteps:!0}),n)},()=>{let n=up.util,a=up.element;up.Change.UpdateSteps=class extends up.Change.Addition{constructor(e){super(e),this._noneOptions=e.noneOptions||{},this._steps=n.copy(e.steps)}execute(e){if(this.responseDoc=e,this._steps=e.selectSteps(this._steps),this._steps=e.commitSteps(this._steps),!this._steps.length)return this._executeNone();this.renderResult=new up.RenderResult({layer:this._steps[0]?.layer,target:up.fragment.targetForSteps(this._steps)}),this._steps.reverse();let t=this._steps.map(i=>this._executeStep(i));return this.renderResult.finished=this._finish(t),this.renderResult}_executeNone(){return this._handleFocus(null,this._noneOptions),this._handleScroll(null,this._noneOptions),up.RenderResult.buildNone()}async _finish(e){await Promise.all(e);for(let t of this._steps)this.abortWhenLayerClosed(t.layer);return this.renderResult}_addToResult(e){let t=e.matches("up-wrapper")?e.children:[e];this.renderResult.fragments.unshift(...t)}_executeStep(e){switch(this.setReloadAttrs(e),e.placement){case"swap":{if(this._findKeepPlan(e))return this._handleFocus(e.oldElement,e),this._handleScroll(e.oldElement,e),Promise.resolve();{this._preserveKeepables(e);let i=e.oldElement.parentNode,o={...e,beforeStart(){up.fragment.markAsDestroying(e.oldElement)},afterInsert:()=>{this._restoreKeepables(e),this.responseDoc.finalizeElement(e.newElement),this._unmarkKeepables(e),up.hello(e.newElement,e),this._addToResult(e.newElement)},beforeDetach:()=>{up.script.clean(e.oldElement,{layer:e.layer})},afterDetach(){up.element.cleanJQuery(),up.fragment.emitDestroyed(e.oldElement,{parent:i,log:!1})},scrollNew:()=>{this._handleFocus(e.newElement,e),this._handleScroll(e.newElement,e)}};return up.morph(e.oldElement,e.newElement,e.transition,o)}}case"content":{let t=a.wrapChildren(e.oldElement),i=a.wrapChildren(e.newElement),o={...e,placement:"swap",oldElement:t,newElement:i,focus:!1};return this._executeStep(o).then(()=>{a.unwrap(i),this._handleFocus(e.oldElement,e)})}case"before":case"after":{let t=a.wrapChildren(e.newElement),i=e.placement==="before"?"afterbegin":"beforeend";return e.oldElement.insertAdjacentElement(i,t),this.responseDoc.finalizeElement(t),up.hello(t,e),this._addToResult(t),this._handleFocus(t,e),this._handleScroll(t,e),up.animate(t,e.transition,e).then(()=>a.unwrap(t))}default:up.fail("Unknown placement: %o",e.placement)}}_findKeepPlan(e){if(!e.useKeep)return;let{oldElement:t,newElement:i}=e;if(!a.booleanAttr(t,"up-keep"))return;let u,g=up.fragment.toTarget(t),m={layer:e.layer};if(e.descendantsOnly?u=up.fragment.get(i,g,m):u=up.fragment.subtree(i,g,m)[0],u&&a.booleanAttr(u,"up-keep")!==!1){let L={oldElement:t,newElement:u,newData:up.script.data(u),renderOptions:e};if(!up.fragment.emitKeep(L).defaultPrevented)return L}}_preserveKeepables(e){let t=[];if(e.useKeep)for(let i of e.oldElement.querySelectorAll("[up-keep]")){let o=this._findKeepPlan({...e,oldElement:i,descendantsOnly:!0});if(o){let u=i.cloneNode(!0);i.insertAdjacentElement("beforebegin",u),i.classList.add("up-keeping"),up.script.disableSubtree(o.newElement);let g=up.viewport.subtree(o.oldElement);o.revivers=g.map(function(m){let L=up.viewport.copyCursorProps(m);return()=>up.viewport.copyCursorProps(L,m)}),this._willChangeElement(document.body)?o.newElement.replaceWith(i):document.body.append(i),t.push(o)}}e.keepPlans=t}_restoreKeepables(e){for(let t of e.keepPlans){t.newElement.replaceWith(t.oldElement);for(let i of t.revivers)i()}}_unmarkKeepables(e){for(let t of e.keepPlans)t.oldElement.classList.remove("up-keeping")}_willChangeElement(e){return n.some(this._steps,t=>t.oldElement.contains(e))}_handleFocus(e,t){return new up.FragmentFocus({...t,fragment:e,autoMeans:up.fragment.config.autoFocus}).process(t.focus)}_handleScroll(e,t){return new up.FragmentScrolling({...t,fragment:e,autoMeans:up.fragment.config.autoScroll}).process(t.scroll)}}},()=>{let n=up.util;up.Change.CloseLayer=class extends up.Change.Removal{constructor(r){super(r),this._verb=r.verb,this._layer=up.layer.get(r),this._origin=r.origin,this._value=r.value,this._preventable=r.preventable??!0,this._response=r.response,this._history=r.history??!0}execute(){if(!this._layer.isOpen())return Promise.resolve();if(up.browser.assertConfirmed(this.options),this._emitCloseEvent().defaultPrevented&&this._preventable)throw new up.Aborted("Close event was prevented");this._emitClosingEvent(),up.fragment.abort({reason:"Layer is closing",layer:this._layer});let{parent:r}=this._layer;this._layer.peel(),this._layer.stack.remove(this._layer),this._history&&r.restoreHistory(),this._handleFocus(r),this._layer.teardownHandlers(),this._layer.destroyElements(this.options),this._emitClosedEvent(r)}_emitCloseEvent(){let r=this._layer.emit(this._buildEvent(`up:layer:${this._verb}`),{callback:this._layer.callback(`on${n.upperCaseFirst(this._verb)}`),log:[`Will ${this._verb} ${this._layer} with value %o`,this._value]});return this._value=r.value,r}_emitClosingEvent(){let r=this._buildEvent(`up:layer:${this._verb}ing`);this._layer.emit(r,{log:!1})}_emitClosedEvent(r){let e=`${this._verb}ed`,t=n.upperCaseFirst(e);return this._layer.emit(this._buildEvent(`up:layer:${e}`),{baseLayer:r,callback:this._layer.callback(`on${t}`),ensureBubbles:!0,log:[`${t} ${this._layer} with value %o`,this._value]})}_buildEvent(r){return up.event.build(r,{layer:this._layer,value:this._value,origin:this._origin,response:this._response})}_handleFocus(r){this._layer.overlayFocus.teardown(),r.overlayFocus?.moveToFront();let e=this._layer.origin||r.element;up.focus(e,{preventScroll:!0})}}},()=>{var n;let a=up.util;up.Change.FromURL=(n=class extends up.Change{execute(){let e=this._newPageReason();return e?(up.puts("up.render()",e),up.network.loadPage(this.options),a.unresolvablePromise()):(this.request=up.request(this._getRequestAttrs()),this.options.onRequest?.(this.request),up.feedback.showAroundRequest(this.request,this.options),up.form.disableWhile(this.request,this.options),this.options.preload?this.request:a.always(this.request,t=>this._onRequestSettled(t)))}_newPageReason(){if(a.isCrossOrigin(this.options.url))return"Loading cross-origin content in new page";if(this.options.history&&!up.browser.canPushState())return"Loading content in new page to restore history support"}_getRequestAttrs(){let e=this._preflightPropsForRenderOptions(this.options),t=this._preflightPropsForRenderOptions(this.deriveFailOptions(),{optional:!0});return{...this.options,...e,...a.renameKeys(t,up.fragment.failKey)}}getPreflightProps(){return this._getRequestAttrs()}_preflightPropsForRenderOptions(e,t){return new up.Change.FromContent({...e,preview:!0}).getPreflightProps(t)}_onRequestSettled(e){return e instanceof up.Response?this._onRequestSettledWithResponse(e):this._onRequestSettledWithError(e)}_onRequestSettledWithResponse(e){return new up.Change.FromResponse({...this.options,response:e}).execute()}_onRequestSettledWithError(e){throw e instanceof up.Offline&&this.request.emit("up:fragment:offline",{callback:this.options.onOffline,renderOptions:this.options,retry:t=>up.render({...this.options,...t}),log:["Cannot load fragment from %s: %s",this.request.description,e.reason]}),e}},a.memoizeMethod(n.prototype,{_getRequestAttrs:!0}),n)},()=>{var n;let a=up.util;up.Change.FromResponse=(n=class extends up.Change{constructor(e){super(e),this._response=e.response,this._request=this._response.request}execute(){if(up.fragment.config.skipResponse(this._loadedEventProps())?this._skip():this._request.assertEmitted("up:fragment:loaded",{...this._loadedEventProps(),callback:this.options.onLoaded,log:["Loaded fragment from %s",this._response.description],skip:()=>this._skip()}),a.evalOption(this.options.fail,this._response)??!this._response.ok)throw this._updateContentFromResponse(this.deriveFailOptions());return this._updateContentFromResponse(this.options)}_skip(){up.puts("up.render()","Skipping "+this._response.description),this.options.target=":none",this.options.failTarget=":none"}_updateContentFromResponse(e){e.failPrefixForced&&up.puts("up.render()","Rendering failed response using fail-prefixed options (https://unpoly.com/failed-responses)"),this._augmentOptionsFromResponse(e),e.meta=this._compilerPassMeta();let t=new up.Change.FromContent(e).execute();return t.finished=this.finish(t,e),t}async finish(e,t){return e=await e.finished,up.fragment.shouldRevalidate(this._request,this._response,t)&&(e=await this._revalidate(e,t)),e}async _revalidate(e,t){let i=t.target,o=e.target;if(/:(before|after)/.test(i))up.warn("up.render()","Cannot revalidate cache when prepending/appending (target %s)",i);else{up.puts("up.render()",'Revalidating cached response for target "%s"',o);let u=await up.reload(o,{...t,preferOldElements:e.fragments,layer:e.layer,onFinished:null,scroll:!1,focus:"keep",transition:!1,cache:!1,confirm:!1,feedback:!1,abort:!1,expiredResponse:this._response});u.none||(e=u)}return e}_loadedEventProps(){let{expiredResponse:e}=this.options;return{request:this._request,response:this._response,renderOptions:this.options,revalidating:!!e,expiredResponse:e}}_compilerPassMeta(){let e={revalidating:!!this.options.expiredResponse};return up.migrate.processCompilerPassMeta?.(e,this._response),e}_augmentOptionsFromResponse(e){let t=this._response.url,i=t,o=this._request.hash;o&&(e.hash=o,i+=o),this._response.method==="GET"?e.source=this.improveHistoryValue(e.source,t):(e.source=this.improveHistoryValue(e.source,"keep"),e.history=!!e.location),e.location=this.improveHistoryValue(e.location,i),e.title=this.improveHistoryValue(e.title,this._response.title),e.eventPlans=this._response.eventPlans;let g=this._response.target;g&&(e.target=g),e.acceptLayer=this._response.acceptLayer,e.dismissLayer=this._response.dismissLayer,e.document=this._response.text,this._response.none&&(e.target=":none"),e.context=a.merge(e.context,this._response.context),e.cspNonces=this._response.cspNonces,e.time??(e.time=this._response.lastModified),e.etag??(e.etag=this._response.etag)}},a.memoizeMethod(n.prototype,{_loadedEventProps:!0}),n)},()=>{var n;let a=up.util;up.Change.FromContent=(n=class extends up.Change{constructor(e){super(e),this._origin=e.origin,this._preview=e.preview,this._layers=e.layers}_getPlans(){let e=[];return this._filterLayers(),this._improveOptionsFromResponseDoc(),this._expandIntoPlans(e,this._layers,this.options.target),this._expandIntoPlans(e,this._layers,this.options.fallback),e}_isRenderableLayer(e){return e==="new"||e.isOpen()}_filterLayers(){this._layers=a.filter(this._layers,this._isRenderableLayer)}_expandIntoPlans(e,t,i){for(let o of t)for(let u of this._expandTargets(i,o)){let g={...this.options,target:u,layer:o,defaultPlacement:this._defaultPlacement()},m=o==="new"?new up.Change.OpenLayer(g):new up.Change.UpdateLayer(g);e.push(m)}}_expandTargets(e,t){return up.fragment.expandTargets(e,{layer:t,mode:this.options.mode,origin:this._origin})}execute(){return this.options.preload?Promise.resolve():this._seekPlan(this._executePlan.bind(this))||this._cannotMatchPostflightTarget()}_executePlan(e){let t=e.execute(this._getResponseDoc(),this._onPlanApplicable.bind(this,e));return t.options=this.options,t}_isApplicablePlanError(e){return!(e instanceof up.CannotMatch)}_onPlanApplicable(e){let t=this._getPlans()[0];e!==t&&up.puts("up.render()",'Could not match primary target "%s". Updating a fallback target "%s".',t.target,e.target);let{assets:i}=this._getResponseDoc();i&&up.script.assertAssetsOK(i,e.options),this.options.onRender?.()}_getResponseDoc(){if(this._preview)return;let e=a.pick(this.options,["target","content","fragment","document","html","cspNonces","origin"]);return up.migrate.handleResponseDocOptions?.(e),this._defaultPlacement()==="content"&&(e.target=this._firstExpandedTarget(e.target)),new up.ResponseDoc(e)}_improveOptionsFromResponseDoc(){var t;if(this._preview)return;let e=this._getResponseDoc();this.options.fragment&&((t=this.options).target||(t.target=e.rootSelector())),this.options.title=this.improveHistoryValue(this.options.title,e.title),this.options.metaTags=this.improveHistoryValue(this.options.metaTags,e.metaTags),this.options.lang=this.improveHistoryValue(this.options.lang,e.lang)}_defaultPlacement(){if(!this.options.document&&!this.options.fragment)return"content"}_firstExpandedTarget(e){let t=this._layers[0]||up.layer.root;return this._expandTargets(e||":main",t)[0]}getPreflightProps(e={}){let t=i=>i.getPreflightProps();return this._seekPlan(t)||e.optional||this._cannotMatchPreflightTarget()}_cannotMatchPreflightTarget(){this._cannotMatchTarget("Could not find target in current page")}_cannotMatchPostflightTarget(){this._cannotMatchTarget("Could not find common target in current page and response")}_cannotMatchTarget(e){if(this._getPlans().length){let t=a.uniq(a.map(this._getPlans(),"target")),i=up.layer.optionToString(this.options.layer);throw new up.CannotMatch([e+" (tried selectors %o in %s)",t,i])}else if(this._layers.length===0)this._cannotMatchLayer();else throw this.options.failPrefixForced?new up.CannotMatch("No target selector given for failed responses (https://unpoly.com/failed-responses)"):new up.CannotMatch("No target selector given")}_cannotMatchLayer(){throw new up.CannotMatch("Could not find a layer to render in. You may have passed an unmatchable layer reference, or a detached element.")}_seekPlan(e){for(let t of this._getPlans())try{return e(t)}catch(i){if(this._isApplicablePlanError(i))throw i}}},a.memoizeMethod(n.prototype,{_getPlans:!0,_getResponseDoc:!0,getPreflightProps:!0}),n)},()=>{let n=up.util;up.CompilerPass=class{constructor(r,e,{layer:t,data:i,dataMap:o,meta:u}){t||(t=up.layer.get(r)||up.layer.current),this._root=r,this._compilers=e,this._layer=t,this._data=i,this._dataMap=o,u||(u={}),u.layer=t,this._meta=u}run(){this._layer.asCurrent(()=>{this.setCompileData();for(let r of this._compilers)this._runCompiler(r)})}setCompileData(){if(this._data&&(this._root.upCompileData=this._data),this._dataMap)for(let r in this._dataMap)for(let e of this._select(r))e.upCompileData=this._dataMap[r]}_runCompiler(r){let e=this._selectOnce(r);if(e.length){if(r.isDefault||up.puts("up.hello()",'Compiling %d\xD7 "%s" on %s',e.length,r.selector,this._layer),r.batch)this._compileBatch(r,e);else for(let t of e)this._compileOneElement(r,t);return up.migrate.postCompile?.(e,r)}}_compileOneElement(r,e){let t=[e];if(r.length!==1){let u=up.script.data(e);t.push(u,this._meta)}let i=this._applyCompilerFunction(r,e,t),o=this._destructorPresence(i);o&&up.destructor(e,o)}_compileBatch(r,e){let t=[e];if(r.length!==1){let o=n.map(e,up.script.data);t.push(o,this._meta)}let i=this._applyCompilerFunction(r,e,t);this._destructorPresence(i)&&up.fail("Compilers with { batch: true } cannot return destructors")}_applyCompilerFunction(r,e,t){return up.error.guard(()=>r.apply(e,t))}_destructorPresence(r){if(n.isFunction(r)||n.isArray(r)&&n.every(r,n.isFunction))return r}_select(r){return up.fragment.subtree(this._root,n.evalOption(r),{layer:this._layer})}_selectOnce(r){let e=this._select(r.selector);return n.filter(e,t=>{let i=t.upAppliedCompilers||(t.upAppliedCompilers=new Set);if(!i.has(r))return i.add(r),!0})}}},()=>{let n=up.util,a=up.element;up.CSSTransition=class{constructor(e,t,i){this._element=e,this._lastFrame=t,this._lastFrameKeys=Object.keys(this._lastFrame),this._finishEvent=i.finishEvent,this._duration=i.duration,this._easing=i.easing,this._finished=!1}start(){return this._lastFrameKeys.length===0?(this._finished=!0,Promise.resolve()):(this._deferred=n.newDeferred(),this._pauseOldTransition(),this._startTime=new Date,this._startFallbackTimer(),this._listenToFinishEvent(),this._listenToTransitionEnd(),this._startMotion(),this._deferred)}_listenToFinishEvent(){this._finishEvent&&(this._stopListenToFinishEvent=up.on(this._element,this._finishEvent,this._onFinishEvent.bind(this)))}_onFinishEvent(e){e.stopPropagation(),this._finish()}_startFallbackTimer(){this._fallbackTimer=n.timer(this._duration+100,()=>this._finish())}_stopFallbackTimer(){clearTimeout(this._fallbackTimer)}_listenToTransitionEnd(){this._stopListenToTransitionEnd=up.on(this._element,"transitionend",this._onTransitionEnd.bind(this))}_onTransitionEnd(e){if(e.target!==this._element||new Date-this._startTime<=.25*this._duration)return;let i=e.propertyName;n.contains(this._lastFrameKeys,i)&&this._finish()}_finish(){this._finished||(this._finished=!0,this._stopFallbackTimer(),this._stopListenToFinishEvent?.(),this._stopListenToTransitionEnd?.(),a.concludeCSSTransition(this._element),this._resumeOldTransition(),this._deferred.resolve())}_pauseOldTransition(){let e=a.style(this._element,["transition-property","transition-duration","transition-delay","transition-timing-function"]);if(a.hasCSSTransition(e)){if(e["transition-property"]!=="all"){let t=e["transition-property"].split(/\s*,\s*/),i=a.style(this._element,t);this._setOldTransitionTargetFrame=a.setTemporaryStyle(this._element,i)}this._setOldTransition=a.concludeCSSTransition(this._element)}}_resumeOldTransition(){this._setOldTransitionTargetFrame?.(),this._setOldTransition?.()}_startMotion(){a.setStyle(this._element,{"transition-property":this._lastFrameKeys.join(),"transition-duration":`${this._duration}ms`,"transition-timing-function":this._easing}),a.setStyle(this._element,this._lastFrame)}}},()=>{let n=up.util;up.DestructorPass=class{constructor(r,e){this._fragment=r,this._options=e}run(){for(let r of this._selectCleanables()){let e=n.pluckKey(r,"upDestructors");if(e)for(let t of e)this._applyDestructorFunction(t,r);r.classList.remove("up-can-clean")}}_selectCleanables(){let r={...this._options,destroying:!0};return up.fragment.subtree(this._fragment,".up-can-clean",r)}_applyDestructorFunction(r,e){up.error.guard(()=>r(e))}}},()=>{let n=up.util,a=up.element;up.EventEmitter=class extends up.Record{keys(){return["target","event","baseLayer","callback","log","ensureBubbles"]}emit(){return this._logEmission(),this.baseLayer?this.baseLayer.asCurrent(()=>this._dispatchEvent()):this._dispatchEvent(),this.event}_dispatchEvent(){this.target.dispatchEvent(this.event),this.ensureBubbles&&!this.target.isConnected&&document.dispatchEvent(this.event),up.error.guard(()=>this.callback?.(this.event))}assertEmitted(){let e=this.emit();if(e.defaultPrevented)throw new up.Aborted(`Event ${e.type} was prevented`)}_logEmission(){if(!up.log.config.enabled)return;let e=this.log,t;n.isArray(e)?[e,...t]=e:t=[];let{type:i}=this.event;n.isString(e)?up.puts(i,e,...t):e!==!1&&up.puts(i,`Event ${i}`)}static fromEmitArgs(e,t={}){let i=n.extractOptions(e);i=n.merge(t,i),n.isElementish(e[0])?i.target=a.get(e.shift()):e[0]instanceof up.Layer&&(i.layer=e.shift());let o;return n.isGiven(i.layer)&&(o=up.layer.get(i.layer),i.target||(i.target=o.element),i.baseLayer||(i.baseLayer=o)),i.baseLayer&&(i.baseLayer=up.layer.get(i.baseLayer)),n.isString(i.target)?i.target=up.fragment.get(i.target,{layer:i.layer}):i.target||(i.target=document),e[0]?.preventDefault?(i.event=e[0],i.log??(i.log=e[0].log)):n.isString(e[0])?i.event=up.event.build(e[0],i):i.event=up.event.build(i),new this(i)}}},()=>{let n=up.util;up.EventListener=class extends up.Record{keys(){return["element","eventType","selector","callback","guard","baseLayer","passive","once","capture","beforeBoot"]}constructor(r){super(r),this._key=this.constructor._buildKey(r),this.isDefault=up.framework.evaling,this.beforeBoot??(this.beforeBoot=this.eventType.indexOf("up:framework:")===0),this.nativeCallback=this.nativeCallback.bind(this)}bind(){var e;let r=(e=this.element).upEventListeners||(e.upEventListeners={});r[this._key]&&up.fail("up.on(): The %o callback %o cannot be registered more than once",this.eventType,this.callback),r[this._key]=this,this.element.addEventListener(...this._addListenerArg())}_addListenerArg(){let r=n.compactObject(n.pick(this,["once","passive","capture"]));return[this.eventType,this.nativeCallback,r]}unbind(){let r=this.element.upEventListeners;r&&delete r[this._key],this.element.removeEventListener(...this._addListenerArg())}nativeCallback(r){if(up.framework.beforeBoot&&!this.beforeBoot)return;let e=r.target;if(this.selector&&(e=e.closest(n.evalOption(this.selector))),!(this.guard&&!this.guard(r))&&e){let t=[r,e],i=this.callback.length;if(i!==1&&i!==2){let u=up.script.data(e);t.push(u)}if(this.eventType==="click"&&e.disabled)return;let o=this.callback.bind(e,...t);this.baseLayer?this.baseLayer.asCurrent(o):o()}}static fromElement(r){let e=r.element.upEventListeners;if(e){let t=this._buildKey(r);return e[t]}}static _buildKey(r){var e;return(e=r.callback).upUid||(e.upUid=n.uid()),[r.eventType,r.selector,r.callback.upUid].join("|")}static allNonDefault(r){let e=r.upEventListeners;if(e){let t=Object.values(e);return n.reject(t,"isDefault")}else return[]}}},()=>{let n=up.util;up.EventListenerGroup=class extends up.Record{keys(){return["elements","eventTypes","selector","callback","guard","baseLayer","passive","once","capture","beforeBoot"]}bind(){let r=[];return this._eachListenerAttributes(function(e){let t=new up.EventListener(e);return t.bind(),r.push(t.unbind.bind(t))}),n.sequence(r)}_eachListenerAttributes(r){for(let e of this.elements)for(let t of this.eventTypes)r(this._listenerAttributes(e,t))}_listenerAttributes(r,e){return{...this.attributes(),element:r,eventType:e}}unbind(){this._eachListenerAttributes(function(r){let e=up.EventListener.fromElement(r);e&&e.unbind()})}static fromBindArgs(r,e){r=n.copy(r);let t=r.pop(),i;r[0].addEventListener?i=[r.shift()]:n.isJQuery(r[0])||n.isList(r[0])&&r[0][0].addEventListener?i=r.shift():i=[document];let o=n.parseTokens(r.shift()),u=up.migrate.fixEventTypes;u&&(o=u(o));let g=n.extractOptions(r),m=r[0],L={elements:i,eventTypes:o,selector:m,callback:t,...g,...e};return new this(L)}}},()=>{let n=up.util;up.FieldWatcher=class{constructor(r,e,t){this._options=e,this._root=r,this._scope=up.form.getScope(r),this._callback=t,this._batch=e.batch,this._abortable=e.abortable}start(){this._scheduledValues=null,this._processedValues=this._readFieldValues(),this._currentTimer=null,this._callbackRunning=!1,this._unbindFns=[],this._watchFieldsWithin(this._root),this._root.addEventListener("up:fragment:inserted",({target:r})=>{r!==this._root&&this._watchFieldsWithin(r)}),this._unbindFns.push(up.fragment.onAborted(this._scope,()=>this._abort())),this._unbindFns.push(up.on(this._scope,"reset",()=>this._onFormReset()))}stop(){this._abort();for(let r of this._unbindFns)r()}_fieldOptions(r){let e=n.copy(this._options);return up.form.watchOptions(r,e,{defaults:{event:"input"}})}_watchFieldsWithin(r){for(let e of up.form.fields(r))this._watchField(e)}_watchField(r){let e=this._fieldOptions(r);this._unbindFns.push(up.on(r,e.event,()=>this._check(e)))}_abort(){this._scheduledValues=null}_scheduleValues(r,e){this._scheduledValues=r,this._scheduledFieldOptions=e;let t=e.delay||0;clearTimeout(this._currentTimer),this._currentTimer=n.timer(t,()=>{this._currentTimer=null,this._requestCallback()})}_isNewValues(r){return!n.isEqual(r,this._processedValues)&&!n.isEqual(this._scheduledValues,r)}async _requestCallback(){if(!this._scheduledValues||this._callbackRunning||this._currentTimer||!this._scope.isConnected)return;let r=this._scheduledFieldOptions,e=this._changedValues(this._processedValues,this._scheduledValues);this._processedValues=this._scheduledValues,this._scheduledValues=null,this._callbackRunning=!0,this._scheduledFieldOptions=null;let t={...r,disable:!1},i=[];if(this._batch)i.push(this._runCallback(e,t));else for(let o in e){let u=e[o];i.push(this._runCallback(u,o,t))}if(n.some(i,n.isPromise)){let o=Promise.allSettled(i);up.form.disableWhile(o,r),await o}this._callbackRunning=!1,this._requestCallback()}_runCallback(...r){return up.error.guard(()=>this._callback(...r))}_changedValues(r,e){let t={},i=Object.keys(r);i=i.concat(Object.keys(e)),i=n.uniq(i);for(let o of i){let u=r[o],g=e[o];n.isEqual(u,g)||(t[o]=g)}return t}_readFieldValues(){return up.Params.fromContainer(this._root).toObject()}_check(r={}){let e=this._readFieldValues();this._isNewValues(e)&&this._scheduleValues(e,r)}_onFormReset(){n.task(()=>this._check())}}},()=>{let n=up.util,a=up.element;up.FormValidator=class{constructor(e){this._form=e,this._dirtySolutions=[],this._nextRenderTimer=null,this._rendering=!1,this._resetNextRenderPromise(),this._honorAbort()}_honorAbort(){up.fragment.onAborted(this._form,e=>this._onAborted(e))}_onAborted(e){this._dirtySolutions.length&&(this._dirtySolutions=[],this._nextRenderPromise.reject(new up.Aborted(e.reason)),this._resetNextRenderPromise())}_resetNextRenderPromise(){this._nextRenderPromise=n.newDeferred()}watchContainer(e){let{event:t}=this._originOptions(e),i=()=>up.fragment.isAlive(e),o=()=>up.error.muteUncriticalRejection(this.validate({origin:e}));up.on(e,t,{guard:i},o)}validate(e={}){let t=this._getSolutions(e);return this._dirtySolutions.push(...t),this._scheduleNextRender(),this._nextRenderPromise}_getSolutions(e){let t=this._getTargetSelectorSolutions(e)||this._getFieldSolutions(e)||this._getElementSolutions(e.origin);for(let i of t)i.renderOptions=this._originOptions(i.origin,e),i.target=up.fragment.resolveOrigin(i.target,i);return t}_getFieldSolutions({origin:e,...t}){if(up.form.isField(e))return this._getValidateAttrSolutions(e)||this._getFormGroupSolutions(e,t)}_getFormGroupSolutions(e,{formGroup:t=!0}){if(!t)return;let i=up.form.groupSolution(e);if(i)return up.puts("up.validate()","Validating form group of field %o",e),[i]}_getTargetSelectorSolutions({target:e,origin:t}){if(n.isString(e)){up.puts("up.validate()",'Validating target "%s"',e);let i=up.fragment.splitTarget(e);return n.compact(i.map(function(o){let u=up.fragment.get(o,{origin:t});if(u)return{element:u,target:o,origin:t};up.fail('Validation target "%s" does not match an element',o)}))}}_getElementSolutions(e){return up.puts("up.validate()","Validating element %o",e),[{element:e,target:up.fragment.toTarget(e),origin:e}]}_getValidateAttrSolutions(e){let t=e.closest("[up-validate]");if(t){let i=a.booleanOrStringAttr(t,"up-validate");return this._getTargetSelectorSolutions({target:i,origin:e})}}_originOptions(e,t){return up.form.watchOptions(e,t,{defaults:{event:"change"}})}_scheduleNextRender(){let e=this._dirtySolutions.map(i=>i.renderOptions.delay),t=Math.min(...e)||0;clearTimeout(this._nextRenderTimer),this._nextRenderTimer=n.timer(t,()=>{this._nextRenderTimer=null,this._renderDirtySolutions()})}_renderDirtySolutions(){up.error.muteUncriticalRejection(this._doRenderDirtySolutions())}async _doRenderDirtySolutions(){if(!this._dirtySolutions.length||this._rendering||this._nextRenderTimer)return;let e=this._dirtySolutions;this._dirtySolutions=[];let t=n.map(e,"origin"),i=n.flatMap(t,up.form.fields),o=n.uniq(n.map(i,"name")),u=this._buildDataMap(e),g=n.map(e,"renderOptions"),m=n.mergeDefined(...g,{dataMap:u},up.form.destinationOptions(this._form));m.target=n.map(e,"target").join(", "),m.feedback=n.some(g,"feedback"),m.origin=this._form,m.focus??(m.focus="keep"),m.failOptions=!1,m.defaultMaybe=!0,m.params=up.Params.merge(m.params,...n.map(g,"params")),m.headers=n.merge(...n.map(g,"headers")),this._addValidateHeader(m.headers,o),m.guardEvent=up.event.build("up:form:validate",{fields:i,log:"Validating form",params:m.params,form:this._form}),this._rendering=!0;let L=this._nextRenderPromise;this._resetNextRenderPromise(),m.disable=!1;for(let N of e)up.form.disableWhile(L,{disable:N.renderOptions.disable,origin:N.origin});try{L.resolve(up.render(m)),await L}finally{this._rendering=!1,this._renderDirtySolutions()}}_addValidateHeader(e,t){let i=up.protocol.headerize("validate"),o=t.join(" ");(!o||o.length>up.protocol.config.maxHeaderSize)&&(o=":unknown"),e[i]=o}_buildDataMap(e){let t={};for(let i of e){let o=n.pluckKey(i.renderOptions,"data");n.pluckKey(i.renderOptions,"keepData")&&(o=up.data(i.element)),o&&(t[i.target]=o)}return t}static forElement(e){let t=up.form.get(e);return t.upFormValidator||(t.upFormValidator=new this(t))}}},()=>{up.FocusCapsule=class{constructor(a,r){this._target=a,this._cursorProps=r}restore(a,r){let e=up.fragment.get(this._target,{layer:a});if(e)return up.viewport.copyCursorProps(this._cursorProps,e),up.focus(e,r),!0}static preserve(a){let r=up.viewport.focusedElementWithin(a.element);if(!r)return;let e=up.fragment.tryToTarget(r);if(!e)return;let t=up.viewport.copyCursorProps(r);return new this(e,t)}}},()=>{let n=up.util;up.FragmentProcessor=class extends up.Record{keys(){return["fragment","autoMeans","origin","layer"]}process(r){let e=this.preprocess(r);return this.tryProcess(e)}preprocess(r){return n.parseTokens(r,{separator:"or"})}tryProcess(r){if(n.isArray(r))return this.processArray(r);if(n.isFunction(r)){let e=up.error.guard(()=>r(this.fragment,this.attributes()));return this.tryProcess(e)}if(n.isElement(r))return this.processElement(r);if(n.isString(r)){if(r==="auto")return this.tryProcess(this.autoMeans);let e=r.match(/^(.+?)-if-(.+?)$/);if(e)return this.resolveCondition(e[2])&&this.process(e[1])}return this.processPrimitive(r)}processArray(r){return n.find(r,e=>this.tryProcess(e))}resolveCondition(r){if(r==="main")return this.fragment&&up.fragment.contains(this.fragment,":main")}findSelector(r){let e={layer:this.layer,origin:this.origin},i=this.fragment&&up.fragment.get(this.fragment,r,e)||up.fragment.get(r,e);if(i)return i;up.warn("up.render()",'Could not find an element matching "%s"',r)}}},()=>{let n=up.util,a=/^([^ >+(]+) (.+)$/;up.FragmentFinder=class{constructor(e){this._options=e,this._origin=e.origin,this._selector=e.selector,this._document=e.document||window.document,this._match=e.match??up.fragment.config.match,this._preferOldElements=e.preferOldElements}find(){return this._findInPreferredElements()||this._findInRegion()||this._findFirst()}_findInPreferredElements(){if(this._preferOldElements)return this._preferOldElements.find(e=>this._document.contains(e)&&up.fragment.matches(e,this._selector))}_findInRegion(){if(this._match==="region"&&!up.fragment.containsMainPseudo(this._selector)&&this._origin?.isConnected)return this._findClosest()||this._findDescendantInRegion()}_findClosest(){return up.fragment.closest(this._origin,this._selector,this._options)}_findDescendantInRegion(){let e=up.fragment.splitTarget(this._selector);return n.findResult(e,t=>{let i=t.match(a);if(i){let o=up.fragment.closest(this._origin,i[1],this._options);if(o)return up.fragment.getDumb(o,i[2])}})}_findFirst(){return up.fragment.getDumb(this._document,this._selector,this._options)}}},()=>{let n=up.util,a=up.element,r={preventScroll:!0};up.FragmentFocus=class extends up.FragmentProcessor{keys(){return super.keys().concat(["hash","focusCapsule","inputDevice"])}processPrimitive(t){switch(t){case"keep":return this._restoreLostFocus();case"restore":return this._restorePreviousFocusForLocation();case"target":case!0:return this._focusElement(this.fragment);case"layer":return this._focusElement(this.layer.getFocusElement());case"main":return this._focusSelector(":main");case"hash":return this._focusHash();case"autofocus":return this._autofocus();default:if(n.isString(t))return this._focusSelector(t)}}processElement(t){return this._focusElement(t)}resolveCondition(t){return t==="lost"?this._wasFocusLost():super.resolveCondition(t)}_focusSelector(t){let i=this.findSelector(t);return this._focusElement(i)}_restoreLostFocus(){if(this._wasFocusLost())return this.focusCapsule?.restore(this.layer,r)}_restorePreviousFocusForLocation(){return up.viewport.restoreFocus({layer:this.layer})}_autofocus(){let t=this.fragment&&a.subtree(this.fragment,"[autofocus]")[0];if(t)return this._focusElement(t)}_focusElement(t){if(t)return up.focus(t,{force:!0,...r,inputDevice:this.inputDevice}),!0}_focusHash(){let t=up.viewport.firstHashTarget(this.hash,{layer:this.layer});if(t)return this._focusElement(t)}_wasFocusLost(){return!this.layer.hasFocus()}}},()=>{let n=up.element;up.FragmentPolling=class{constructor(r){this._options=up.radio.pollOptions(r),this._fragment=r,up.destructor(r,this._onFragmentDestroyed.bind(this)),up.fragment.onAborted(r,this._onFragmentAborted.bind(this)),this._state="initialized",this._abortable=!0,this._loading=!1,this._satisfyInterval()}static forFragment(r){return r.upPolling||(r.upPolling=new this(r))}onPollAttributeObserved(){this._start()}_onFragmentDestroyed(){this._stop()}_start(r){if(Object.assign(this._options,r),this._state!=="started"){if(!up.fragment.isTargetable(this._fragment)){up.warn("[up-poll]","Cannot poll untargetable fragment %o",this._fragment);return}this._state="started",this._ensureEventsBound(),this._scheduleRemainingTime()}}_stop(){this._state==="started"&&(this._clearReloadTimer(),this._state="stopped",this.unbindEvents?.())}forceStart(r){Object.assign(this._options,r),this.forceStarted=!0,this._start()}forceStop(){this._stop(),this.forceStarted=!1}_ensureEventsBound(){this.unbindEvents||(this.unbindEvents=up.on("visibilitychange up:layer:opened up:layer:dismissed up:layer:accepted",this._onVisibilityChange.bind(this)))}_onVisibilityChange(){this._isFragmentVisible()&&this._scheduleRemainingTime()}_isFragmentVisible(){return!document.hidden&&(this._options.ifLayer==="any"||this._isOnFrontLayer())}_clearReloadTimer(){clearTimeout(this.reloadTimer),this.reloadTimer=null}_scheduleRemainingTime(){!this.reloadTimer&&!this._loading&&(this._clearReloadTimer(),this.reloadTimer=setTimeout(this._onTimerReached.bind(this),this._getRemainingDelay()))}_onTimerReached(){this.reloadTimer=null,this._tryReload()}_tryReload(){if(this._state==="started"){if(!this._isFragmentVisible()){up.puts("[up-poll]","Will not poll hidden fragment");return}this._reloadNow()}}_getFullDelay(){return this._options.interval??n.numberAttr(this._fragment,"up-interval")??up.radio.config.pollInterval}_getRemainingDelay(){return Math.max(this._getFullDelay()-this._getFragmentAge(),0)}_getFragmentAge(){return new Date-this._lastAttempt}_isOnFrontLayer(){return this.layer||(this.layer=up.layer.get(this._fragment)),this.layer?.isFront?.()}_reloadNow(){this._clearReloadTimer();let r=this._abortable;try{this._abortable=!1,this._loading=!0,up.reload(this._fragment,this._reloadOptions()).then(this._onReloadSuccess.bind(this),this._onReloadFailure.bind(this))}finally{this._abortable=r}}_reloadOptions(){let r=up.event.build("up:fragment:poll",{log:["Polling fragment",this._fragment]});return{...this._options,guardEvent:r}}_onFragmentAborted({newLayer:r}){this._abortable&&!r&&this._stop()}_onReloadSuccess({fragment:r}){this._loading=!1,this._satisfyInterval(),r?this._onFragmentSwapped(r):this._scheduleRemainingTime()}_onFragmentSwapped(r){this._stop(),this.forceStarted&&up.fragment.matches(this._fragment,r)&&this.constructor.forFragment(r).forceStart(this._options)}_onReloadFailure(r){this._loading=!1,this._satisfyInterval(),this._scheduleRemainingTime(),up.error.throwCritical(r)}_satisfyInterval(){this._lastAttempt=new Date}}},()=>{let n=up.util;up.FragmentScrolling=class extends up.FragmentProcessor{keys(){return super.keys().concat(["hash","mode","revealTop","revealMax","revealSnap","scrollBehavior"])}processPrimitive(r){switch(r){case"reset":return this._reset();case"layer":return this._revealLayer();case"main":return this._revealSelector(":main");case"restore":return this._restore();case"hash":return this.hash&&up.viewport.revealHash(this.hash,this.attributes());case"target":case"reveal":case!0:return this._revealElement(this.fragment);default:if(n.isString(r))return this._revealSelector(r)}}processElement(r){return this._revealElement(r)}_revealElement(r){if(r)return up.reveal(r,this.attributes()),!0}_revealSelector(r){let e=this.findSelector(r);return this._revealElement(e)}_revealLayer(){return this._revealElement(this.layer.getBoxElement())}_reset(){return up.viewport.resetScroll({...this.attributes(),around:this.fragment}),!0}_restore(){return up.viewport.restoreScroll({...this.attributes(),around:this.fragment})}}},()=>{let n=up.element,a=up.util;up.Layer=class extends up.Record{keys(){return["element","stack","history","mode","context","lastScrollTops","lastFocusCapsules"]}defaults(){return{context:{},lastScrollTops:up.viewport.newStateCache(),lastFocusCapsules:up.viewport.newStateCache()}}constructor(e={}){if(super(e),!this.mode)throw"missing { mode } option"}setupHandlers(){up.link.convertClicks(this)}teardownHandlers(){}mainTargets(){return up.layer.mainTargets(this.mode)}sync(){}accept(){throw new up.NotImplemented}dismiss(){throw new up.NotImplemented}peel(e){this.stack.peel(this,e)}evalOption(e){return a.evalOption(e,this)}isCurrent(){return this.stack.isCurrent(this)}isFront(){return this.stack.isFront(this)}isRoot(){return this.stack.isRoot(this)}isOverlay(){return this.stack.isOverlay(this)}isOpen(){return this.stack.isOpen(this)}isClosed(){return this.stack.isClosed(this)}get parent(){return this.stack.parentOf(this)}get child(){return this.stack.childOf(this)}get ancestors(){return this.stack.ancestorsOf(this)}get descendants(){return this.stack.descendantsOf(this)}get subtree(){return[this,...this.descendants]}get index(){return this._index??(this._index=this.stack.indexOf(this))}getContentElement(){return this.contentElement||this.element}getBoxElement(){return this.boxElement||this.element}getFocusElement(){return this.getBoxElement()}getFirstSwappableElement(){throw new up.NotImplemented}contains(e){return e.closest(up.layer.anySelector())===this.element}on(...e){return this._buildEventListenerGroup(e).bind()}off(...e){return this._buildEventListenerGroup(e).unbind()}_buildEventListenerGroup(e){return up.EventListenerGroup.fromBindArgs(e,{guard:t=>this._containsEventTarget(t),elements:[this.element],baseLayer:this})}_containsEventTarget(e){return this.contains(e.target)}wasHitByMouseEvent({clientX:e,clientY:t}){let i=document.elementFromPoint(e,t);return!i||this.contains(i)}_buildEventEmitter(e){return up.EventEmitter.fromEmitArgs(e,{layer:this})}emit(...e){return this._buildEventEmitter(e).emit()}isDetached(){return!this.element.isConnected}saveHistory(){this.history&&(this.savedTitle=document.title,this.savedMetaTags=up.history.findMetaTags(),this.savedLocation=up.history.location,this.savedLang=up.history.getLang())}restoreHistory(){this.showsLiveHistory()&&(this.savedLocation&&up.history.push(this.savedLocation),this.savedTitle&&(document.title=this.savedTitle),this.savedMetaTags&&up.history.updateMetaTags(this.savedMetaTags),a.isString(this.savedLang)&&up.history.updateLang(this.savedLang))}asCurrent(e){return this.stack.asCurrent(this,e)}updateHistory(e){a.isString(e.location)&&(this.location=e.location),up.history.config.updateMetaTags&&a.isList(e.metaTags)&&(up.migrate?.warnOfHungryMetaTags?.(e.metaTags),this.metaTags=e.metaTags),a.isString(e.title)&&(this.title=e.title),a.isString(e.lang)&&(this.lang=e.lang)}showsLiveHistory(){return this.history&&this.isFront()}get title(){return this.showsLiveHistory()?document.title:this.savedTitle}set title(e){this.savedTitle=e,this.showsLiveHistory()&&(document.title=e)}get metaTags(){return this.showsLiveHistory()?up.history.findMetaTags():this.savedMetaTags}set metaTags(e){this.savedMetaTags=e,this.showsLiveHistory()&&up.history.updateMetaTags(e)}get lang(){return this.showsLiveHistory()?up.history.getLang():this.savedLang}set lang(e){this.savedLang=e,this.showsLiveHistory()&&up.history.updateLang(e)}get location(){return this.showsLiveHistory()?up.history.location:this.savedLocation}set location(e){let t=this.location;e=a.normalizeURL(e),(t!==e||this.opening)&&(this.savedLocation=e,this.showsLiveHistory()&&up.history.push(e),this.opening||this.emit("up:layer:location:changed",{location:e}))}selector(e){return this.constructor.selector(e)}static selector(e){throw new up.NotImplemented}toString(){throw new up.NotImplemented}affix(...e){return n.affix(this.getFirstSwappableElement(),...e)}[a.isEqual.key](e){return this.constructor===e.constructor&&this.element===e.element}hasFocus(){let e=document.activeElement;return e!==document.body&&this.element.contains(e)}reset(){Object.assign(this,this.defaults())}}},()=>{let n=up.element,a=up.util;up.Layer.Overlay=class extends up.Layer{keys(){return super.keys().concat(["position","align","size","origin","class","backdrop","openAnimation","closeAnimation","openDuration","closeDuration","openEasing","closeEasing","backdropOpenAnimation","backdropCloseAnimation","dismissable","dismissLabel","dismissAriaLabel","onOpened","onAccept","onAccepted","onDismiss","onDismissed","acceptEvent","dismissEvent","acceptLocation","dismissLocation","opening"])}constructor(e){super(e),this.dismissable===!0?this.dismissable=["button","key","outside"]:this.dismissable===!1?this.dismissable=[]:this.dismissable=a.parseTokens(this.dismissable),this.acceptLocation&&(this.acceptLocation=new up.URLPattern(this.acceptLocation)),this.dismissLocation&&(this.dismissLocation=new up.URLPattern(this.dismissLocation))}callback(e){let t=this[e];if(t)return t.bind(this)}createElement(e){this.nesting||(this.nesting=this._suggestVisualNesting());let t=a.compactObject(a.pick(this,["align","position","size","class","nesting"]));this.element=this.affixPart(e,null,t)}createBackdropElement(e){this.backdropElement=this.affixPart(e,"backdrop")}createViewportElement(e){this.viewportElement=this.affixPart(e,"viewport",{"up-viewport":""})}createBoxElement(e){this.boxElement=this.affixPart(e,"box")}createContentElement(e){this.contentElement=this.affixPart(e,"content")}setContent(e){this.contentElement.append(e),this.onContentSet()}onContentSet(){}createDismissElement(e){return this.dismissElement=this.affixPart(e,"dismiss",{"up-dismiss":'":button"',"aria-label":this.dismissAriaLabel}),n.affix(this.dismissElement,'span[aria-hidden="true"]',{text:this.dismissLabel})}affixPart(e,t,i={}){return n.affix(e,this.selector(t),i)}static selector(e){return a.compact(["up",this.mode,e]).join("-")}_suggestVisualNesting(){let{parent:e}=this;return this.mode===e.mode?1+e._suggestVisualNesting():0}setupHandlers(){super.setupHandlers(),this.overlayFocus=new up.OverlayFocus(this),this._supportsDismissMethod("button")&&this.createDismissElement(this.getBoxElement()),this._supportsDismissMethod("outside")&&(this.viewportElement?up.on(this.viewportElement,"up:click",e=>{e.target===this.viewportElement&&this._onOutsideClicked(e,!0)}):this.unbindParentClicked=this.parent.on("up:click",(e,t)=>{if(!up.layer.isWithinForeignOverlay(t)){let i=this.origin&&this.origin.contains(t);this._onOutsideClicked(e,i)}})),this._supportsDismissMethod("key")&&(this.unbindEscapePressed=up.event.onEscape(e=>this.onEscapePressed(e))),this.registerClickCloser("up-accept",(e,t)=>{this.accept(e,t)}),this.registerClickCloser("up-dismiss",(e,t)=>{this.dismiss(e,t)}),up.migrate.registerLayerCloser?.(this),this._registerEventCloser(this.acceptEvent,this.accept),this._registerEventCloser(this.dismissEvent,this.dismiss),this.on("up:click","label[for]",(e,t)=>this._onLabelClicked(e,t))}_onLabelClicked(e,t){let i=t.getAttribute("for"),o=up.form.fieldSelector(n.idSelector(i)),u=up.fragment.all(o,{layer:"any"}),g=up.fragment.all(o,{layer:this});if(u.length>1&&g[0]!==u[0]){e.preventDefault();let m=g[0];m.focus(),m.matches("input[type=checkbox], input[type=radio]")&&m.click()}}_onOutsideClicked(e,t){up.log.putsEvent(e),t&&up.event.halt(e),up.error.muteUncriticalSync(()=>this.dismiss(":outside",{origin:e.target}))}onEscapePressed(e){if(this.isFront()){let t=up.form.focusedField();t?t.blur():this._supportsDismissMethod("key")&&(up.event.halt(e,{log:!0}),up.error.muteUncriticalSync(()=>this.dismiss(":key")))}}registerClickCloser(e,t){let i=`[${e}]`;this.on("up:click",i,function(o){up.event.halt(o,{log:!0});let u=o.target.closest(i),g=n.jsonAttr(u,e),m={origin:u},L=new up.OptionsParser(u,m);L.booleanOrString("animation"),L.string("easing"),L.number("duration"),L.string("confirm"),up.error.muteUncriticalSync(()=>t(g,m))})}_registerEventCloser(e,t){if(e)return this.on(e,i=>{i.preventDefault(),up.error.muteUncriticalSync(()=>t.call(this,i,{response:i.response}))})}tryAcceptForLocation(e){this._tryCloseForLocation(this.acceptLocation,this.accept,e)}tryDismissForLocation(e){this._tryCloseForLocation(this.dismissLocation,this.dismiss,e)}_tryCloseForLocation(e,t,i){let o,u;if(e&&(o=this.location)&&(u=e.recognize(o))){let g={...u,location:o};up.error.muteUncriticalSync(()=>t.call(this,g,i))}}teardownHandlers(){super.teardownHandlers(),this.unbindParentClicked?.(),this.unbindEscapePressed?.(),this.overlayFocus.teardown()}destroyElements(e){let o={...e,animation:()=>this.startCloseAnimation(e),onFinished:()=>{this.onElementsRemoved(),e.onFinished?.()},log:!1};up.destroy(this.element,o)}onElementsRemoved(){}_startAnimation(e={}){let t=up.animate(this.getBoxElement(),e.boxAnimation,e),i;return this.backdrop&&!up.motion.isNone(e.boxAnimation)&&(i=up.animate(this.backdropElement,e.backdropAnimation,e)),Promise.all([t,i])}async startOpenAnimation(e={}){await this._startAnimation({boxAnimation:e.animation??this.evalOption(this.openAnimation),backdropAnimation:"fade-in",easing:e.easing||this.openEasing,duration:e.duration||this.openDuration}),this.wasEverVisible=!0}startCloseAnimation(e={}){return this._startAnimation({boxAnimation:this.wasEverVisible&&(e.animation??this.evalOption(this.closeAnimation)),backdropAnimation:this.wasEverVisible&&"fade-out",easing:e.easing||this.closeEasing,duration:e.duration||this.closeDuration})}accept(e=null,t={}){return this._executeCloseChange("accept",e,t)}dismiss(e=null,t={}){return this._executeCloseChange("dismiss",e,t)}_supportsDismissMethod(e){return a.contains(this.dismissable,e)}_executeCloseChange(e,t,i){return i={...i,verb:e,value:t,layer:this},new up.Change.CloseLayer(i).execute()}getFirstSwappableElement(){return this.getContentElement().children[0]}toString(){return`${this.mode} overlay`}}},()=>{up.Layer.OverlayWithTether=class extends up.Layer.Overlay{createElements(){this.origin||up.fail("Missing { origin } option"),this._tether=new up.Tether({anchor:this.origin,align:this.align,position:this.position}),this.createElement(this._tether.parent),this.createContentElement(this.element)}onContentSet(){this._tether.start(this.element)}onElementsRemoved(){this._tether.stop()}sync(){this.isOpen()&&(this.isDetached()||this._tether.isDetached()?this.dismiss(":detached",{animation:!1,preventable:!1}):this._tether.sync())}}},()=>{up.Layer.OverlayWithViewport=class extends up.Layer.Overlay{static getParentElement(){return document.body}createElements(){up.viewport.bodyShifter.raiseStack(),this.createElement(this.constructor.getParentElement()),this.backdrop&&this.createBackdropElement(this.element),this.createViewportElement(this.element),this.createBoxElement(this.viewportElement),this.createContentElement(this.boxElement)}onElementsRemoved(){up.viewport.bodyShifter.lowerStack()}sync(){this.isDetached()&&this.isOpen()&&this.constructor.getParentElement().appendChild(this.element)}}},()=>{var n;let a=up.element;up.Layer.Root=(n=class extends up.Layer{get element(){return a.root}constructor(e){super(e),this.setupHandlers()}getFirstSwappableElement(){return document.body}static selector(){return"html"}setupHandlers(){this.element.upHandlersApplied||(this.element.upHandlersApplied=!0,super.setupHandlers())}sync(){this.setupHandlers()}accept(){this._cannotCloseRoot()}dismiss(){this._cannotCloseRoot()}_cannotCloseRoot(){up.fail("Cannot close the root layer")}toString(){return"root layer"}},n.mode="root",n)},()=>{var n;up.Layer.Modal=(n=class extends up.Layer.OverlayWithViewport{},n.mode="modal",n)},()=>{var n;up.Layer.Popup=(n=class extends up.Layer.OverlayWithTether{},n.mode="popup",n)},()=>{var n;up.Layer.Drawer=(n=class extends up.Layer.OverlayWithViewport{},n.mode="drawer",n)},()=>{var n;up.Layer.Cover=(n=class extends up.Layer.OverlayWithViewport{},n.mode="cover",n)},()=>{var n;let a=up.util,r=up.element;up.LayerLookup=(n=class{constructor(t,i){this._stack=t,i.normalizeLayerOptions!==!1&&up.layer.normalizeOptions(i),this._options=i,this._values=a.parseTokens(i.layer)}all(){let t=a.flatMap(this._values,i=>this._resolveValue(i));return t=a.compact(t),t=a.uniq(t),t}static all(t,...i){let o=a.parseArgIntoOptions(i,"layer"),{layer:u}=o;return u instanceof up.Layer?[u]:new this(t,o).all()}_forElement(t){return t=r.get(t),a.find(this._stack.reversed(),i=>i.contains(t))}_forIndex(t){return this._stack.at(t)}_resolveValue(t){if(t instanceof up.Layer)return t;if(a.isNumber(t))return this._forIndex(t);if(/^\d+$/.test(t))return this._forIndex(Number(t));if(a.isElementish(t))return this._forElement(t);switch(t){case"any":return[this._getBaseLayer(),...this._stack.reversed()];case"current":return this._getBaseLayer();case"closest":return this._stack.selfAndAncestorsOf(this._getBaseLayer());case"parent":return this._getBaseLayer().parent;case"ancestor":case"ancestors":return this._getBaseLayer().ancestors;case"child":return this._getBaseLayer().child;case"descendant":case"descendants":return this._getBaseLayer().descendants;case"subtree":return this._getBaseLayer().subtree;case"new":return"new";case"root":return this._stack.root;case"overlay":case"overlays":return a.reverse(this._stack.overlays);case"front":return this._stack.front;case"origin":return this._getOriginLayer();default:return up.fail("Unknown { layer } option: %o",t)}}_getOriginLayer(){let{origin:t}=this._options;if(t)return this._forElement(t)}_getBaseLayer(){let{baseLayer:t}=this._options;if(a.isString(t)){let i={...this._options,baseLayer:this._stack.current,normalizeLayerOptions:!1,layer:t};return this.constructor.all(this._stack,i)[0]}else return t||this._getOriginLayer()||this._stack.current}},a.memoizeMethod(n.prototype,{_getBaseLayer:!0,_getOriginLayer:!0}),n)},()=>{let n=up.util;up.LayerStack=class{constructor(){this._currentOverrides=[],this.layers=[this._buildRoot()]}_buildRoot(){return up.layer.build({mode:"root",stack:this})}remove(r){n.remove(this.layers,r)}peel(r,e){let t=n.reverse(r.descendants),i={...e,preventable:!1};for(let o of t)o.dismiss(":peel",i)}reset(){this.peel(this.root,{animation:!1}),this._currentOverrides=[],this.root.reset()}isOpen(r){return n.contains(this.layers,r)}isClosed(r){return!this.isOpen(r)}parentOf(r){return this.layers[r.index-1]}childOf(r){return this.layers[r.index+1]}ancestorsOf(r){return n.reverse(this.layers.slice(0,r.index))}selfAndAncestorsOf(r){return[r,...r.ancestors]}descendantsOf(r){return this.layers.slice(r.index+1)}isRoot(r){return this.root===r}isOverlay(r){return this.root!==r}isCurrent(r){return this.current===r}isFront(r){return this.front===r}get(...r){return this.getAll(...r)[0]}getAll(...r){return up.LayerLookup.all(this,...r)}sync(){for(let r of this.layers)r.sync()}asCurrent(r,e){try{return this._currentOverrides.push(r),e()}finally{this._currentOverrides.pop()}}reversed(){return n.reverse(this.layers)}dismissOverlays(r=null,e={}){e.dismissable=!1;for(let t of n.reverse(this.overlays))t.dismiss(r,e)}at(r){return this.layers[r]}indexOf(r){return this.layers.indexOf(r)}get count(){return this.layers.length}get root(){return this.layers[0]}get overlays(){return this.root.descendants}get current(){return n.last(this._currentOverrides)||this.front}get front(){return n.last(this.layers)}}},()=>{let n=up.util;up.LinkFeedbackURLs=class{constructor(r){if(this._isSafe=up.link.isSafe(r),this._isSafe){let e=r.getAttribute("href");e&&e!=="#"&&(this._href=n.matchableURL(e));let t=r.getAttribute("up-href");t&&(this._upHREF=n.matchableURL(t));let i=r.getAttribute("up-alias");i&&(this._aliasPattern=new up.URLPattern(i))}}isCurrent(r){return r?!!(this._href===r||this._upHREF===r||this._aliasPattern?.test?.(r,!1)):!1}}},()=>{let n=up.util,a=up.element;up.LinkFollowIntent=class{constructor(e,t){this._link=e,this._callback=t,this._on("mouseenter mousedown touchstart",i=>this._scheduleCallback(i)),this._on("mouseleave",()=>this._unscheduleCallback()),up.fragment.onAborted(this._link,()=>this._unscheduleCallback())}_on(e,t){up.on(this._link,e,{passive:!0},t)}_scheduleCallback(e){if(!up.link.shouldFollowEvent(e,this._link))return;if(this._unscheduleCallback(),e.type==="mouseenter"){let i=this._parseDelay();this._timer=n.timer(i,()=>this._runCallback(e))}else this._runCallback(e)}_unscheduleCallback(){clearTimeout(this._timer),up.network.abort(e=>e.origin===this._link&&e.background)}_parseDelay(){return a.numberAttr(this._link,"up-preload-delay")??up.link.config.preloadDelay}_runCallback(e){up.log.putsEvent(e),up.error.muteUncriticalRejection(this._callback())}}},()=>{let n=up.util,a=up.element;up.MotionController=class{constructor(e){this._activeClass=`up-${e}`,this._selector=`.${this._activeClass}`,this.finishEvent=`up:${e}:finish`,this.finishCount=0,this._clusterCount=0}startFunction(e,t,i={}){e=a.list(e);let o=()=>up.error.muteUncriticalRejection(t());if(i.trackMotion=i.trackMotion??up.motion.isEnabled(),i.trackMotion===!1)return o();{i.trackMotion=!1,this.finish(e),this._markCluster(e);let u=this._whileForwardingFinishEvent(e,o);return u=u.then(()=>this._unmarkCluster(e)),u}}finish(e){if(this.finishCount++,!(this._clusterCount===0||!up.motion.isEnabled())){e=this._expandFinishRequest(e);for(let t of e)this._finishOneElement(t);return up.migrate.formerlyAsync?.("up.motion.finish()")}}_expandFinishRequest(e){return e?n.flatMap(e,t=>a.list(t.closest(this._selector),t.querySelectorAll(this._selector))):document.querySelectorAll(this._selector)}isActive(e){return e.classList.contains(this._activeClass)}_finishOneElement(e){this._emitFinishEvent(e)}_emitFinishEvent(e,t={}){return t={target:e,log:!1,...t},up.emit(this.finishEvent,t)}_markCluster(e){this._clusterCount++,this._toggleActive(e,!0)}_unmarkCluster(e){this._clusterCount--,this._toggleActive(e,!1)}_toggleActive(e,t){for(let i of e)i.classList.toggle(this._activeClass,t)}_whileForwardingFinishEvent(e,t){if(e.length<2)return t();let i=u=>{if(!u.forwarded)for(let g of e)g!==u.target&&this.isActive(g)&&this._emitFinishEvent(g,{forwarded:!0})},o=up.on(e,this.finishEvent,i);return t().then(o)}async reset(){await this.finish(),this.finishCount=0,this._clusterCount=0}}},()=>{let n=up.util,a=up.element;up.NonceableCallback=class{constructor(e,t){this.script=e,this.nonce=t}static fromString(e){let t=e.match(/^(nonce-([^\s]+)\s)?(.*)$/);return new this(t[3],t[2])}toFunction(...e){if(this.nonce){let t=this;return function(...i){return t._runAsNoncedFunction(this,e,i)}}else return new Function(...e,this.script)}toString(){return`nonce-${this.nonce} ${this.script}`}_runAsNoncedFunction(e,t,i){let o=`
      try {
        up.noncedEval.value = (function(${t.join()}) {
          ${this.script}
        }).apply(up.noncedEval.thisArg, up.noncedEval.args)
      } catch (error) {
        up.noncedEval.error = error
      }
    `,u;try{if(up.noncedEval={args:i,thisArg:e},u=up.element.affix(document.body,"script",{nonce:this.nonce,text:o}),up.noncedEval.error)throw up.noncedEval.error;return up.noncedEval.value}finally{up.noncedEval=void 0,u&&u.remove()}}_allowedBy(e){return this.nonce&&n.contains(e,this.nonce)}static adoptNonces(e,t){if(!t?.length)return;let i=n.memoize(up.protocol.cspNonce);n.each(up.script.config.nonceableAttributes,o=>{let u=a.subtree(e,`[${o}^="nonce-"]`);n.each(u,g=>{let m=g.getAttribute(o),L=this.fromString(m),N=(V,...J)=>up.log.warn("up.render()",`Cannot use callback [${o}="${m}"]: ${V}`,...J);if(!L._allowedBy(t))return N("Callback's CSP nonce (%o) does not match response header (%o)",L.nonce,t);let X=i();if(!X)return N("Current page's CSP nonce is unknown");L.nonce=X,g.setAttribute(o,L.toString())})})}}},()=>{let n=up.element,a=up.util;up.OverlayFocus=class{constructor(e){this._layer=e,this._focusElement=this._layer.getFocusElement()}moveToFront(){this._enabled||(this._enabled=!0,this._untrapFocus=up.on("focusin",e=>this._onFocus(e)),this._unsetAttrs=n.setTemporaryAttrs(this._focusElement,{tabindex:"0",role:"dialog","aria-modal":"true"}),this._focusTrapBefore=n.affix(this._focusElement,"beforebegin","up-focus-trap[tabindex=0]"),this._focusTrapAfter=n.affix(this._focusElement,"afterend","up-focus-trap[tabindex=0]"))}moveToBack(){this.teardown()}teardown(){this._enabled&&(this._enabled=!1,this._untrapFocus(),this._unsetAttrs(),this._focusTrapBefore.remove(),this._focusTrapAfter.remove())}_onFocus(e){let{target:t}=e;this._processingFocusEvent||up.layer.isWithinForeignOverlay(t)||(this._processingFocusEvent=!0,t===this._focusTrapBefore?this._focusEnd():(t===this._focusTrapAfter||!this._layer.contains(t))&&this._focusStart(),this._processingFocusEvent=!1)}_focusStart(e){up.focus(this._focusElement,e)}_focusEnd(){this._focusLastDescendant(this._layer.getBoxElement())||this._focusStart()}_focusLastDescendant(e){for(let t of a.reverse(e.children))if(up.viewport.tryFocus(t)||this._focusLastDescendant(t))return!0}}},()=>{let n=up.util,a=up.element;up.Params=class{constructor(e){this.clear(),this.addAll(e)}clear(){this.entries=[]}[n.copy.key](){return new up.Params(this)}toObject(){let e={};for(let t of this.entries){let{name:i,value:o}=t;n.isBasicObjectProperty(i)||(this._isArrayKey(i)?(e[i]||(e[i]=[]),e[i].push(o)):e[i]=o)}return e}toArray(){return this.entries}toFormData(){let e=new FormData;for(let t of this.entries)e.append(t.name,t.value);return e.entries||(e.originalArray=this.entries),e}toQuery(){let e=n.map(this.entries,this._arrayEntryToQuery.bind(this));return e=n.compact(e),e.join("&")}_arrayEntryToQuery(e){let{value:t}=e;if(this._isBinaryValue(t))return;let i=encodeURIComponent(e.name);return n.isGiven(t)&&(i+="=",i+=encodeURIComponent(t)),i}_isBinaryValue(e){return e instanceof Blob}hasBinaryValues(){let e=n.map(this.entries,"value");return n.some(e,this._isBinaryValue)}toURL(e){let t=[e,this.toQuery()];t=n.filter(t,n.isPresent);let i=n.contains(e,"?")?"&":"?";return t.join(i)}add(e,t){this.entries.push({name:e,value:t})}addAll(e){n.isMissing(e)||(e instanceof this.constructor?this.entries.push(...e.entries):n.isArray(e)?this.entries.push(...e):n.isString(e)?this._addAllFromQuery(e):n.isFormData(e)?this._addAllFromFormData(e):n.isObject(e)?this._addAllFromObject(e):up.fail("Unsupport params type: %o",e))}_addAllFromObject(e){for(let t in e){let i=e[t],o=n.isArray(i)?i:[i];for(let u of o)this.add(t,u)}}_addAllFromQuery(e){for(let t of e.split("&"))if(t){let[i,o]=t.split("=");i=decodeURIComponent(i),n.isGiven(o)?o=decodeURIComponent(o):o=null,this.add(i,o)}}_addAllFromFormData(e){for(let t of e.entries())this.add(...t)}set(e,t){this.delete(e),this.add(e,t)}delete(e){this.entries=n.reject(this.entries,this._matchEntryFn(e))}_matchEntryFn(e){return t=>t.name===e}get(e){return this._isArrayKey(e)?this.getAll(e):this.getFirst(e)}getFirst(e){return n.find(this.entries,this._matchEntryFn(e))?.value}getAll(e){if(this._isArrayKey(e))return this.getAll(e);{let t=n.map(this.entries,this._matchEntryFn(e));return n.map(t,"value")}}_isArrayKey(e){return e.endsWith("[]")}[n.isBlank.key](){return this.entries.length===0}static fromForm(e){return this.fromContainer(e)}static fromContainer(e){let t=up.form.fields(e);return this.fromFields(t)}static fromFields(e){let t=new this;for(let i of n.wrapList(e))t.addField(i);return t}addField(e){e=a.get(e);let t=e.name;if(t&&!e.disabled){let{tagName:i}=e,{type:o}=e;if(i==="SELECT")for(let u of e.querySelectorAll("option"))u.selected&&this.add(t,u.value);else if(o==="checkbox"||o==="radio")e.checked&&this.add(t,e.value);else if(o==="file")for(let u of e.files)this.add(t,u);else return this.add(t,e.value)}}[n.isEqual.key](e){return this.constructor===e.constructor&&n.isEqual(this.entries,e.entries)}static fromURL(e){let t=new this,o=n.parseURL(e).search;return o&&(o=o.replace(/^\?/,""),t.addAll(o)),t}static stripURL(e){return n.normalizeURL(e,{search:!1})}static merge(...e){return e.reduce(function(t,i){return t.addAll(i),t},new up.Params)}}},()=>{let n=up.element,a=300;up.ProgressBar=class{constructor(){this._step=0,this._element=n.affix(document.body,"up-progress-bar"),this._element.style.transition=`width ${a}ms ease-out`,this._moveTo(0),up.element.paint(this._element),this._width=31,this._nextStep()}_nextStep(){let e;this._width<80?Math.random()<.15?e=7+5*Math.random():e=1.5+.5*Math.random():e=.13*(100-this._width)*Math.random(),this._moveTo(this._width+e),this._step++;let t=a+this._step*40;this.timeout=setTimeout(this._nextStep.bind(this),t)}_moveTo(e){this._width=e,this._element.style.width=`${e}vw`}destroy(){clearTimeout(this.timeout),this._element.remove()}conclude(){clearTimeout(this.timeout),this._moveTo(100),setTimeout(this.destroy.bind(this),a)}}},()=>{let n=up.util;up.RenderOptions=function(){let a={useHungry:!0,useKeep:!0,saveScroll:!0,saveFocus:!0,focus:"keep",abort:"target",failOptions:!0},r={abort:!1,confirm:!1,feedback:!1,cache:!0,background:!0},t=["url","method","origin","headers","params","cache","fallback","abort","abortable","confirm","feedback","origin","baseLayer","fail","onError"].concat(["keep","hungry","history","source","saveScroll","navigate","baseLayer"]),i=["url","response","content","fragment","document"],o=["history","focus","scroll"];function u(R){if(R.navigate)return up.fragment.config.navigateOptions}function g(R){if(R.preload)return r}function m(R){up.migrate.preprocessRenderOptions?.(R);let U=n.merge(a,u(R));return n.merge(n.omit(U,o),{defaults:U},{inputDevice:up.event.inputDevice},R,L(R),g(R))}function L(R){return{layers:up.layer.getAll(R),normalizeLayerOptions:!1}}function N(R,U){return n.merge(R.defaults,U,R)}function X(R){n.some(i,U=>n.isGiven(R[U]))||(R.defaultToEmptyContent?R.content="":up.fail("up.render() needs either { "+i.join(", ")+" } option"))}function V(R){let U={};for(let Q in R){let ee=R[Q],$=up.fragment.successKey(Q);$&&(U[$]=ee)}return U}function J(R){let U=V(R),Q=L(U);return R.failOptions?{...R.defaults,...n.pick(R,t),...U,...Q,failPrefixForced:!0}:{...R,...U,...Q}}return{preprocess:m,finalize:N,assertContentGiven:X,deriveFailOptions:J}}()},()=>{up.RenderResult=class extends up.Record{keys(){return["fragments","layer","target","options","finished"]}defaults(){return{fragments:[]}}get none(){return!this.fragments.length}get fragment(){return this.fragments[0]}static both(a,r,e=!0){return r?new this({target:a.target,layer:a.layer,options:a.options,fragments:a.fragments.concat(r.fragments),finished:e&&this.mergeFinished(a,r)}):a}static async mergeFinished(a,r){return this.both(await a.finished,await r.finished,!1)}static buildNone(){return new this({target:":none",finished:Promise.resolve()})}}},()=>{var n;let a=up.util;up.Request=(n=class extends up.Record{keys(){return["method","url","hash","params","target","failTarget","headers","timeout","background","cache","expireCache","evictCache","layer","mode","context","failLayer","failMode","failContext","origin","fragments","builtAt","wrapMethod","contentType","payload","onLoading","fail","abortable","badResponseTime"]}defaults(){return{state:"new",abortable:!0,headers:{},timeout:up.network.config.timeout,builtAt:new Date}}constructor(e){if(super(e),this.params=new up.Params(this.params),this.wrapMethod==null&&(this.wrapMethod=up.network.config.wrapMethod),this._normalize(),(this.target||this.layer||this.origin)&&!e.basic){let t={origin:this.origin};this.layer=up.layer.get(this.layer,t),this.failLayer=up.layer.get(this.failLayer,t),this.context||(this.context=this.layer.context||{}),this.failContext||(this.failContext=this.failLayer?.context||{}),this.mode||(this.mode=this.layer.mode),this.failMode||(this.failMode=this.failLayer?.mode)}this.deferred=a.newDeferred(),this.badResponseTime??(this.badResponseTime=a.evalOption(up.network.config.badResponseTime,this)),this._setAutoHeaders()}get xhr(){return this._xhr??(this._xhr=new XMLHttpRequest)}get fragments(){if(this._fragments)return this._fragments;{let e=up.fragment.parseTargetSteps(this.target),t=a.map(e,"selector"),i={origin:this.origin,layer:this.layer};return a.compact(a.map(t,o=>up.fragment.get(o,i)))}}set fragments(e){this._fragments=e}get fragment(){return this.fragments?.[0]}_normalize(){this.method=a.normalizeMethod(this.method),this._extractHashFromURL(),this._transferParamsToURL(),this.url=a.normalizeURL(this.url)}_evictExpensiveAttrs(){a.task(()=>{this.layer=void 0,this.failLayer=void 0,this.origin=void 0,this.fragments=void 0})}_extractHashFromURL(){let e=this.url?.match(/^([^#]*)(#.+)$/);if(e)return this.url=e[1],this.hash=e[2]}_transferParamsToURL(){!this.url||this.allowsPayload()||a.isBlank(this.params)||(this.url=this.params.toURL(this.url),this.params.clear())}isSafe(){return up.network.isSafeMethod(this.method)}allowsPayload(){return a.methodAllowsPayload(this.method)}will302RedirectWithGET(){return this.isSafe()||this.method==="POST"}willCache(){return a.evalAutoOption(this.cache,up.network.config.autoCache,this)}runQueuedCallbacks(){a.always(this,()=>this._evictExpensiveAttrs())}load(){if(this.state==="new"){if(this._emitLoad())return this.state="loading",this._normalize(),this.onLoading?.(),this.expired=!1,new up.Request.XHRRenderer(this).buildAndSend({onload:()=>this._onXHRLoad(),onerror:()=>this._onXHRError(),ontimeout:()=>this._onXHRTimeout(),onabort:()=>this._onXHRAbort()}),!0;this.abort({reason:"Prevented by event listener"})}}_emitLoad(){return!this.emit("up:request:load",{log:["Loading %s",this.description]}).defaultPrevented}loadPage(){up.network.abort(),new up.Request.FormRenderer(this).buildAndSubmit()}_onXHRLoad(){let e=this._extractResponseFromXHR(),t="Loaded "+e.description;this.emit("up:request:loaded",{request:e.request,response:e,log:t}),this.respondWith(e)}_onXHRError(){this._setOfflineState("Network error")}_onXHRTimeout(){this._setOfflineState("Timeout")}_onXHRAbort(){this._setAbortedState()}abort({reason:e}={}){this._setAbortedState(e)&&this._xhr&&this._xhr.abort()}_setAbortedState(e){if(this._isSettled())return;let t="Aborted request to "+this.description+(e?": "+e:"");return this.state="aborted",this.deferred.reject(new up.Aborted(t)),this.emit("up:request:aborted",{log:t}),!0}_setOfflineState(e){if(this._isSettled())return;let t="Cannot load request to "+this.description+(e?": "+e:"");this.state="offline",this.emit("up:request:offline",{log:t}),this.deferred.reject(new up.Offline(t))}respondWith(e){this.response=e,!this._isSettled()&&(this.state="loaded",e.ok?this.deferred.resolve(e):this.deferred.reject(e))}_isSettled(){return this.state!=="new"&&this.state!=="loading"&&this.state!=="tracking"}csrfHeader(){return up.protocol.csrfHeader()}csrfParam(){return up.protocol.csrfParam()}csrfToken(){if(!this.isSafe()&&!this.isCrossOrigin())return up.protocol.csrfToken()}isCrossOrigin(){return a.isCrossOrigin(this.url)}_extractResponseFromXHR(){let e={method:this.method,url:this.url,request:this,xhr:this.xhr,text:this.xhr.responseText,status:this.xhr.status,title:up.protocol.titleFromXHR(this.xhr),target:up.protocol.targetFromXHR(this.xhr),acceptLayer:up.protocol.acceptLayerFromXHR(this.xhr),dismissLayer:up.protocol.dismissLayerFromXHR(this.xhr),eventPlans:up.protocol.eventPlansFromXHR(this.xhr),context:up.protocol.contextFromXHR(this.xhr),expireCache:up.protocol.expireCacheFromXHR(this.xhr),evictCache:up.protocol.evictCacheFromXHR(this.xhr),fail:this.fail},t=up.protocol.methodFromXHR(this.xhr),i=up.protocol.locationFromXHR(this.xhr);return i&&(a.matchURLs(this.url,i)||t||(t="GET"),e.url=i),t&&(e.method=t),new up.Response(e)}_buildEventEmitter(e){return up.EventEmitter.fromEmitArgs(e,{layer:this.layer,request:this,origin:this.origin})}emit(...e){return this._buildEventEmitter(e).emit()}assertEmitted(...e){this._buildEventEmitter(e).assertEmitted()}get description(){return this.method+" "+this.url}isPartOfSubtree(e){return e=a.wrapList(e),a.some(this.fragments,function(t){return a.some(e,i=>i.contains(t))})}get age(){return new Date-this.builtAt}header(e){return this.headers[e]}_setAutoHeaders(){for(let i of["target","failTarget","mode","failMode","context","failContext"])this._setPropertyHeader(i);let e,t;(e=this.csrfHeader())&&(t=this.csrfToken())&&this._setAutoHeader(e,t),this._setAutoHeader(up.protocol.headerize("version"),up.version)}_setPropertyHeader(e){this._setAutoHeader(up.protocol.headerize(e),this[e])}_setAutoHeader(e,t){a.isMissing(t)||((a.isOptions(t)||a.isArray(t))&&(t=a.safeStringifyJSON(t)),this.headers[e]=t)}mergeIfUnsent(e){if(this.state!=="new"||!this.target||!e.target)return;let t=up.fragment.splitTarget(this.target+","+e.target);this.target=a.uniq(t).join(", "),this._setPropertyHeader("target"),this._fragments=a.uniq([...this.fragments,...e.fragments])}static tester(e,{except:t}={}){let i;if(a.isFunction(e))i=e;else if(e instanceof this)i=o=>e===o;else if(a.isString(e)){let o=new up.URLPattern(e);i=u=>o.test(u.url)}else i=o=>e;return t?o=>!up.cache.willHaveSameResponse(o,t)&&i(o):i}},a.delegate(n.prototype,["then","catch","finally"],function(){return this.deferred}),n)},()=>{let n=up.util;class a{constructor(){this.varyHeaders=new Set,this.requests=[]}matchBest(e){let t=this.requests.filter(i=>this.satisfies(i,e));return n.last(t)}delete(e){n.remove(this.requests,e)}put(e){this.requests.push(e)}updateVary(e){for(let t of e.varyHeaderNames)this.varyHeaders.add(t)}satisfies(e,t){return e===t?!0:n.every(this.varyHeaders,i=>{let o=e.header(i),u=t.header(i);if(i==="X-Up-Target"||i==="X-Up-Fail-Target"){if(!o)return!0;if(!u)return!1;let g=n.parseTokens(o,{separator:"comma"}),m=n.parseTokens(u,{separator:"comma"});return n.containsAll(g,m)}else return o===u})}}up.Request.Cache=class{constructor(){this.reset()}reset(){this._routes={},this._requests=[]}get(e){e=this._wrap(e);let t=this._getRoute(e),i=t.matchBest(e);if(i){if(this._isUsable(i))return i;this._delete(e,t)}}async put(e){e=this._wrap(e);let t=this._getRoute(e),{response:i}=e;i&&t.updateVary(i);let o=t.requests.filter(u=>t.satisfies(e,u));for(let u of o)this._delete(u);e.cacheRoute=t,t.put(e),this._requests.push(e),this._limitSize()}alias(e,t){if(e=this.get(e),!!e)return t=this._wrap(t),this.track(e,t,{force:!0}),this.put(t),t}async track(e,t,i={}){t.trackedRequest=e,t.state="tracking";let o=await n.always(e);o instanceof up.Response?i.force||e.cacheRoute.satisfies(e,t)?(t.fromCache=!0,o=n.variant(o,{request:t}),t.respondWith(o),n.delegate(t,["expired","state"],()=>e)):(delete t.trackedRequest,t.state="new",i.onIncompatible?.(t)):(t.state=e.state,t.deferred.reject(o))}willHaveSameResponse(e,t){return e===t||e===t.trackedRequest}evict(e=!0,t){this._eachMatch(e,t,i=>this._delete(i))}expire(e=!0,t){this._eachMatch(e,t,i=>i.expired=!0)}reindex(e){this._delete(e),this.put(e)}_delete(e){n.remove(this._requests,e),e.cacheRoute?.delete(e),delete e.cacheRoute}_getRoute(e){var t,i;return e.cacheRoute||(t=this._routes)[i=e.description]||(t[i]=new a)}_isUsable(e){return e.age<up.network.config.cacheEvictAge}get _size(){return this._requests.length}get _capacity(){return up.network.config.cacheSize}_limitSize(){for(let e=0;e<this._size-this._capacity;e++)this._delete(this._requests[0])}_eachMatch(e=!0,t,i){let o=up.Request.tester(e,t),u=n.filter(this._requests,o);n.each(u,i)}_wrap(e){return n.wrapValue(up.Request,e)}}},()=>{let n=up.util;up.Request.Queue=class{constructor(){this.reset()}reset(){this._queuedRequests=[],this._currentRequests=[],this._emittedLate=!1}get allRequests(){return this._currentRequests.concat(this._queuedRequests)}asap(r){r.runQueuedCallbacks(),n.always(r,e=>this._onRequestSettled(r,e)),this._scheduleSlowTimer(r),this._queueRequest(r),queueMicrotask(()=>this._poke())}promoteToForeground(r){r.background&&(r.background=!1,this._scheduleSlowTimer(r))}_scheduleSlowTimer(r){let e=Math.max(r.badResponseTime-r.age,0);n.timer(e,()=>this._checkLate())}_getMaxConcurrency(){return n.evalOption(up.network.config.concurrency)}_hasConcurrencyLeft(){let r=this._getMaxConcurrency();return r===-1||this._currentRequests.length<r}isBusy(){return this._currentRequests.length>0||this._queuedRequests.length>0}_queueRequest(r){this._queuedRequests.push(r)}_pluckNextRequest(){let r=n.find(this._queuedRequests,e=>!e.background);return r||(r=this._queuedRequests[0]),n.remove(this._queuedRequests,r)}_sendRequestNow(r){r.load()&&this._currentRequests.push(r)}_onRequestSettled(r,e){n.remove(this._currentRequests,r)||n.remove(this._queuedRequests,r),e instanceof up.Response&&e.ok&&up.network.registerAliasForRedirect(r,e),this._checkLate(),queueMicrotask(()=>this._poke())}_poke(){let r;if(this._hasConcurrencyLeft()&&(r=this._pluckNextRequest()))return this._sendRequestNow(r)}abort(...r){let e=n.extractOptions(r),{except:t,reason:i,logOnce:o}=e,u=r[0]??!0,g=up.Request.tester(u,{except:t});for(let m of[this._currentRequests,this._queuedRequests]){let L=n.filter(m,g);for(let N of L)o&&(up.puts(...o),o=null),N.abort({reason:i}),n.remove(m,N)}}_checkLate(){let r=this._isLate();this._emittedLate!==r&&(this._emittedLate=r,r?up.emit("up:network:late",{log:"Server is slow to respond"}):up.emit("up:network:recover",{log:"Slow requests were loaded"}))}_isLate(){let r=n.reject(this.allRequests,"background"),e=1;return n.some(r,t=>t.age>=t.badResponseTime-e)}}},()=>{let n=up.util,a=up.element,r=["GET","POST"];up.Request.FormRenderer=class{constructor(t){this._request=t}buildAndSubmit(){this.params=n.copy(this._request.params);let t=this._request.url,{method:i}=this._request,o=up.Params.fromURL(t);this.params.addAll(o),t=up.Params.stripURL(t),n.contains(r,i)||(i=up.protocol.wrapMethod(i,this.params)),this._form=a.affix(document.body,"form.up-request-loader",{method:i,action:t});let u=this._request.contentType;u&&this._form.setAttribute("enctype",u);let g,m;(g=this._request.csrfParam())&&(m=this._request.csrfToken())&&this.params.add(g,m),n.each(this.params.toArray(),this._addField.bind(this)),up.browser.submitForm(this._form)}_addField(t){a.affix(this._form,"input[type=hidden]",t)}}},()=>{var n;let a="application/x-www-form-urlencoded",r="multipart/form-data",e=up.util;up.Request.XHRRenderer=(n=class{constructor(i){this._request=i}buildAndSend(i){let o=this._request.xhr;this._params=e.copy(this._request.params),this._request.timeout&&(o.timeout=this._request.timeout),o.open(this._getMethod(),this._request.url);let u=this._getContentType();u&&o.setRequestHeader("Content-Type",u);for(let g in this._request.headers){let m=this._request.headers[g];o.setRequestHeader(g,m)}Object.assign(o,i),o.send(this._getPayload())}_getMethod(){let i=this._request.method;return this._request.wrapMethod&&!this._request.will302RedirectWithGET()&&(i=up.protocol.wrapMethod(i,this._params)),i}_getContentType(){return this._finalizePayload(),this._contentType}_getPayload(){return this._finalizePayload(),this._payload}_finalizePayload(){this._payload=this._request.payload,this._contentType=this._request.contentType,!this._payload&&this._request.allowsPayload()&&(this._contentType||(this._contentType=this._params.hasBinaryValues()?r:a),this._contentType===r?(this._contentType=null,this._payload=this._params.toFormData()):this._payload=this._params.toQuery().replace(/%20/g,"+"))}},e.memoizeMethod(n.prototype,{_finalizePayload:!0,_getMethod:!0}),n)},()=>{let n=up.util;up.Response=class extends up.Record{keys(){return["method","url","text","status","request","xhr","target","title","acceptLayer","dismissLayer","eventPlans","context","expireCache","evictCache","headers","loadedAt","fail"]}defaults(){return{headers:{},loadedAt:new Date}}get ok(){return!n.evalOption(this.fail??up.network.config.fail,this)}get none(){return!this.text}header(r){return this.headers[r]||this.xhr?.getResponseHeader(r)}get varyHeaderNames(){let r=this.header("Vary");return n.parseTokens(r,{separator:"comma"})}get contentType(){return this.header("Content-Type")}get cspNonces(){return up.protocol.cspNoncesFromHeader(this.header("Content-Security-Policy")||this.header("Content-Security-Policy-Report-Only"))}get lastModified(){let r=this.header("Last-Modified");if(r)return new Date(r)}get etag(){return this.header("ETag")}get json(){return this.parsedJSON||(this.parsedJSON=JSON.parse(this.text))}get age(){return new Date-this.loadedAt}get expired(){return this.age>up.network.config.cacheExpireAge||this.request.expired}get description(){return`HTTP ${this.status} response to ${this.request.description}`}}},()=>{var n;let a=up.util,r=up.element,e=/^\s*<(html|!DOCTYPE)\b/i;up.ResponseDoc=(n=class{constructor({document:i,fragment:o,content:u,target:g,origin:m,cspNonces:L,match:N}){if(i?this._parseDocument(i):o?this._parseFragment(o):this._parseContent(u||"",g),this._cspNonces=L,m){let X=up.fragment.tryToTarget(m);X&&(this._rediscoveredOrigin=this.select(X))}this._match=N}_parseDocument(i){i instanceof Document?(this._document=i,this._isFullDocument=!0):a.isString(i)?(this._document=r.createBrokenDocumentFromHTML(i),this._isFullDocument=e.test(i),this._isDocumentBroken=!0):(this._document=this._buildFauxDocument(i),this._isFullDocument=i.matches("html"))}_parseFragment(i){let o=a.isString(i)?r.createFromHTML(i):i;this._document=this._buildFauxDocument(o)}_parseContent(i,o){o||up.fail("must pass a { target } when passing { content }");let u=a.map(up.fragment.parseTargetSteps(o),"selector").join(),g=r.createFromSelector(u);a.isString(i)?g.innerHTML=i:g.appendChild(i),this._document=this._buildFauxDocument(g)}_buildFauxDocument(i){let o=document.createElement("up-document");return o.append(i),o.documentElement=i,o}rootSelector(){return up.fragment.toTarget(this._document.documentElement)}get title(){return this._fromHead(this._getTitleText)}_getHead(){if(this._isFullDocument)return this._document.head}_fromHead(i){let o=this._getHead();return o&&i(o)}get metaTags(){return this._fromHead(up.history.findMetaTags)}get assets(){return this._fromHead(up.script.findAssets)}get lang(){if(this._isFullDocument)return up.history.getLang(this._document)}_getTitleText(i){return i.querySelector("title")?.textContent}select(i){return new up.FragmentFinder({selector:i,origin:this._rediscoveredOrigin,document:this._document,match:this._match}).find()}selectSteps(i){return i.filter(o=>this._trySelectStep(o)||this._cannotMatchStep(o))}commitSteps(i){return i.filter(o=>this.commitElement(o.newElement))}_trySelectStep(i){if(i.newElement)return!0;let o=this.select(i.selector);if(!o)return;let{selectEvent:u}=i;if(!(u&&(u.newFragment=o,u.renderOptions=i.originalRenderOptions,up.emit(i.oldElement,u,{callback:i.selectCallback}),u.defaultPrevented)))return i.newElement=o,!0}_cannotMatchStep(i){if(!i.maybe)throw new up.CannotMatch}commitElement(i){if(this._document.contains(i))return up.fragment.config.runScripts||up.script.disableSubtree(i),i.remove(),!0}finalizeElement(i){if(up.NonceableCallback.adoptNonces(i,this._cspNonces),this._isDocumentBroken){let o=r.subtree(i,":is(noscript,script,audio,video):not(.up-keeping, .up-keeping *)");a.each(o,r.fixParserDamage)}}},a.memoizeMethod(n.prototype,{_getHead:!0}),n)},()=>{let n=up.element,a=up.util;up.RevealMotion=class{constructor(e,t={}){this._element=e,this._viewport=n.get(t.viewport)||up.viewport.get(this._element),this._obstructionsLayer=up.layer.get(this._viewport),this._behavior=t.scrollBehavior??t.behavior??"instant";let i=up.viewport.config;this._snap=t.snap??t.revealSnap??i.revealSnap,this._padding=t.padding??t.revealPadding??i.revealPadding,this._top=t.top??t.revealTop??i.revealTop,this._max=t.max??t.revealMax??i.revealMax,this._topObstructionSelector=i.selector("fixedTopSelectors"),this._bottomObstructionSelector=i.selector("fixedBottomSelectors")}start(){let e=this._getViewportRect(this._viewport),t=up.Rect.fromElement(this._element);if(this._max){let u=a.evalOption(this._max,this._element);t.height=Math.min(t.height,u)}t.grow(this._padding),this._substractObstructions(e),e.height<0&&up.fail("Viewport has no visible area");let i=this._viewport.scrollTop,o=i;if(this._top||t.height>e.height){let u=t.top-e.top;o+=u}else t.top<e.top?o-=e.top-t.top:t.bottom>e.bottom&&(o+=t.bottom-e.bottom);a.isNumber(this._snap)&&o<this._snap&&t.top<.5*e.height&&(o=0),o!==i&&this._viewport.scrollTo({top:o,behavior:this._behavior})}_getViewportRect(){return up.viewport.isRoot(this._viewport)?new up.Rect({left:0,top:0,width:up.viewport.rootWidth(),height:up.viewport.rootHeight()}):up.Rect.fromElement(this._viewport)}_selectObstructions(e){let t=up.fragment.all(e,{layer:this._obstructionsLayer});return a.filter(t,n.isVisible)}_substractObstructions(e){for(let t of this._selectObstructions(this._topObstructionSelector)){let o=up.Rect.fromElement(t).bottom-e.top;o>0&&(e.top+=o,e.height-=o)}for(let t of this._selectObstructions(this._bottomObstructionSelector)){let i=up.Rect.fromElement(t),o=e.bottom-i.top;o>0&&(e.height-=o)}}}},()=>{let n=up.util,a=/:has\(([^)]+)\)$/;up.Selector=class{constructor(e,t,i={}){this._filters=[],i.destroying||this._filters.push(up.fragment.isNotDestroying);let o=t&&!document.contains(t),u;if(o||i.layer==="any")u=up.layer.root;else{if(i.layer??(i.layer=n.presence(t,n.isElement)),this._layers=up.layer.getAll(i),!this._layers.length)throw new up.CannotMatch(["Unknown layer: %o",i.layer]);this._filters.push(m=>n.some(this._layers,L=>L.contains(m))),u=this._layers[0]}let g=up.fragment.expandTargets(e,{...i,layer:u});this._selectors=g.map(m=>(up.browser.canHasSelector()||(m=m.replace(a,(L,N)=>(this._filters.push(X=>X.querySelector(N)),""))),m||"*")),this._unionSelector=this._selectors.join()||"match-none"}matches(e){return e.matches(this._unionSelector)&&this._passesFilter(e)}closest(e){let t;if(this.matches(e))return e;if(t=e.parentElement)return this.closest(t)}_passesFilter(e){return n.every(this._filters,t=>t(e))}descendants(e=document){let t=n.flatMap(this._selectors,i=>e.querySelectorAll(i));return n.filter(t,i=>this._passesFilter(i))}subtree(e){let t=[];return!(e instanceof Document)&&this.matches(e)&&t.push(e),t.push(...this.descendants(e)),t}}},()=>{let n=up.util,a=up.element;up.Tether=class{constructor(e){up.migrate.handleTetherOptions?.(e),this._anchor=e.anchor,this._align=e.align,this._position=e.position,this._alignAxis=this._position==="top"||this._position==="bottom"?"horizontal":"vertical",this._viewport=up.viewport.get(this._anchor),this.parent=this._viewport===a.root?document.body:this._viewport,this._syncOnScroll=!this._viewport.contains(this._anchor.offsetParent)}start(e){this._element=e,this._element.style.position="absolute",this._setOffset(0,0),this.sync(),this._changeEventSubscription("on")}stop(){this._changeEventSubscription("off")}_changeEventSubscription(e){let t=this._scheduleSync.bind(this);up[e](window,"resize",t),this._syncOnScroll&&up[e](this._viewport,"scroll",t)}_scheduleSync(){return clearTimeout(this.syncTimer),this.syncTimer=n.task(this.sync.bind(this))}isDetached(){return!this.parent.isConnected||!this._anchor.isConnected}sync(){let e=this._element.getBoundingClientRect(),t={top:a.styleNumber(this._element,"margin-top"),right:a.styleNumber(this._element,"margin-right"),bottom:a.styleNumber(this._element,"margin-bottom"),left:a.styleNumber(this._element,"margin-left")},i=this._anchor.getBoundingClientRect(),o,u;switch(this._alignAxis){case"horizontal":{switch(this._position){case"top":u=i.top-t.bottom-e.height;break;case"bottom":u=i.top+i.height+t.top;break}switch(this._align){case"left":o=i.left+t.left;break;case"center":o=i.left+.5*(i.width-e.width);break;case"right":o=i.left+i.width-e.width-t.right;break}break}case"vertical":{switch(this._align){case"top":u=i.top+t.top;break;case"center":u=i.top+.5*(i.height-e.height);break;case"bottom":u=i.top+i.height-e.height-t.bottom;break}switch(this._position){case"left":o=i.left-t.right-e.width;break;case"right":o=i.left+i.width+t.left;break}break}}n.isDefined(o)||n.isDefined(u)?this._moveTo(o,u):up.fail("Invalid tether constraints: %o",this._describeConstraints())}_describeConstraints(){return{position:this._position,align:this._align}}_moveTo(e,t){let i=this._element.getBoundingClientRect();this._setOffset(e-i.left+this.offsetLeft,t-i.top+this.offsetTop)}_setOffset(e,t){this.offsetLeft=e,this.offsetTop=t,a.setStyle(this._element,{left:e,top:t},"px")}}},()=>{let n=up.util;up.URLPattern=class{constructor(r){this._groups=[];let e=[],t=[];for(let i of n.parseTokens(r))i[0]==="-"?t.push(i.substring(1)):e.push(i);this._positiveRegexp=this._buildRegexp(e,!0),this._negativeRegexp=this._buildRegexp(t,!1)}_buildRegexp(r,e){if(!r.length)return;r=n.flatMap(r,n.matchableURLPatternAtom),r=r.map(n.escapeRegExp);let t=r.join("|");return t=t.replace(/\\\*/g,".*?"),t=t.replace(/(:|\\\$)([a-z][\w-]*)/ig,(i,o,u)=>o==="\\$"?(e&&this._groups.push({name:u,cast:Number}),"(\\d+)"):(e&&this._groups.push({name:u,cast:String}),"([^/?#]+)")),new RegExp("^(?:"+t+")$")}test(r,e=!0){return e&&(r=n.matchableURL(r)),this._positiveRegexp.test(r)&&!this._isExcluded(r)}recognize(r,e=!0){e&&(r=n.matchableURL(r));let t=this._positiveRegexp.exec(r);if(t&&!this._isExcluded(r)){let i={};return this._groups.forEach((o,u)=>{let g=t[u+1];if(g)return i[o.name]=o.cast(g)}),i}}_isExcluded(r){return this._negativeRegexp?.test(r)}}},()=>{up.framework=function(){let n="evaling";function a(){up.emit("up:framework:reset",{log:!1})}function r(){if(n!=="configuring"){console.error("Unpoly has already booted");return}let m=g();m?console.error("Unpoly cannot boot: %s",m):(n="booting",up.emit("up:framework:boot",{log:!1}),n="booted",up.emit("up:framework:booted",{log:!1}))}function e(){let m=document.currentScript;if(m?.async||m?.getAttribute("up-boot")==="manual"||document.readyState==="complete")return!0}function t(){up.emit("up:framework:evaled",{log:!1}),e()?console.debug("Call up.boot() after you have configured Unpoly"):document.addEventListener("DOMContentLoaded",r),n="configuring"}function i(){if(n!=="configuring")throw new Error("Unpoly extensions must be loaded before booting");n="evaling"}function o(){n="configuring"}function u(){return!g()}function g(){for(let m of["URL","Proxy","Promise","DOMParser","FormData"])if(!window[m])return`Browser doesn't support the ${m} API`;if(document.compatMode==="BackCompat")return"Browser is in quirks mode (missing DOCTYPE?)"}return{onEvaled:t,boot:r,startExtension:i,stopExtension:o,reset:a,get evaling(){return n==="evaling"},get booted(){return n==="booted"},get beforeBoot(){return n!=="booting"&&n!=="booted"},isSupported:u}}(),up.boot=up.framework.boot},()=>{up.event=function(){let n=up.util,a=up.element;function r(){for(let P of[window,document,a.root,document.body])for(let E of up.EventListener.allNonDefault(P))E.unbind()}function e(...P){return i(P).bind()}function t(...P){return i(P).unbind()}function i(P,E){return up.EventListenerGroup.fromBindArgs(P,E)}function o(P){return up.EventEmitter.fromEmitArgs(P)}function u(...P){return o(P).emit()}function g(...P){let E=n.extractOptions(P),v=P[0]||E.type||up.fail("Missing event type"),F=new Event(v,{bubbles:!0,cancelable:!0});return Object.assign(F,n.omit(E,["type","target"])),F}function m(...P){return o(P).assertEmitted()}function L(P){return e("keydown",function(E){if(E.key==="Escape")return P(E)})}function N(P,E={}){E.log&&up.log.putsEvent(P),P.stopImmediatePropagation(),P.preventDefault()}let X=["metaKey","shiftKey","ctrlKey","altKey"];function V(P){return(n.isUndefined(P.button)||P.button===0)&&!n.some(X,E=>P[E])}function J(P){return n.isMissing(P.clientX)}function R(P,E,v=[]){let F=g(E,n.pick(P,v));return F.originalEvent=P,["stopPropagation","stopImmediatePropagation","preventDefault"].forEach(function(w){let C=F[w];return F[w]=function(){return P[w](),C.call(F)}}),P.defaultPrevented&&F.preventDefault(),F}function U(P,E){if(!V(P))return;let v=a.attr(E,"up-emit"),F=a.jsonAttr(E,"up-emit-props"),w=R(P,v);Object.assign(w,F),up.emit(E,w)}e("up:click","[up-emit]",U);let Q=["unknown"];function ee(){return n.last(Q)}function $(P){Q.push(P),setTimeout(()=>Q.pop())}return e("keydown keyup",{capture:!0},()=>$("key")),e("pointerdown pointerup",{capture:!0},()=>$("pointer")),e("up:framework:reset",r),{on:e,off:t,build:g,emit:u,assertEmitted:m,onEscape:L,halt:N,isUnmodified:V,isSyntheticClick:J,fork:R,keyModifiers:X,get inputDevice(){return ee()}}}(),up.on=up.event.on,up.off=up.event.off,up.emit=up.event.emit},()=>{up.protocol=function(){let n=up.util,a=up.element,r=function(F){return"X-Up"+F.replace(/(^.|[A-Z])/g,C=>"-"+C.toUpperCase())},e=function(F,w,C=n.identity){let I=F.getResponseHeader(r(w));if(I)return C(I)};function t(F){return e(F,"target")}function i(F){return F==="false"?!1:F}function o(F){return e(F,"evictCache",i)}function u(F){return e(F,"expireCache")||up.migrate.clearCacheFromXHR?.(F)}function g(F){return e(F,"context",JSON.parse)}function m(F){return e(F,"method",n.normalizeMethod)}function L(F){return up.migrate.titleFromXHR?.(F)??e(F,"title",JSON.parse)}function N(F){return e(F,"events",JSON.parse)}function X(F){return e(F,"acceptLayer",JSON.parse)}function V(F){return e(F,"dismissLayer",JSON.parse)}let J=n.memoize(function(){return n.normalizeMethod(up.browser.popCookie("_up_method"))});function R(F){return e(F,"location")||F.responseURL}let U=new up.Config(()=>({methodParam:"_method",csrfParam(){return a.metaContent("csrf-param")},csrfToken(){return a.metaContent("csrf-token")},cspNonce(){return a.metaContent("csp-nonce")},csrfHeader:"X-CSRF-Token",maxHeaderSize:2048}));function Q(){return n.evalOption(U.csrfHeader)}function ee(){return n.evalOption(U.csrfParam)}function $(){return n.evalOption(U.csrfToken)}function P(){return n.evalOption(U.cspNonce)}function E(F){let w=[];if(F){let C=F.split(/\s*;\s*/);for(let I of C)if(I.indexOf("script-src")===0){let Z=/'nonce-([^']+)'/g,te;for(;te=Z.exec(I);)w.push(te[1])}}return w}function v(F,w){return w.add(U.methodParam,F),"POST"}return{config:U,locationFromXHR:R,titleFromXHR:L,targetFromXHR:t,methodFromXHR:m,acceptLayerFromXHR:X,contextFromXHR:g,dismissLayerFromXHR:V,eventPlansFromXHR:N,expireCacheFromXHR:u,evictCacheFromXHR:o,csrfHeader:Q,csrfParam:ee,csrfToken:$,cspNonce:P,initialRequestMethod:J,headerize:r,wrapMethod:v,cspNoncesFromHeader:E}}()},()=>{up.log=function(){let n=up.util,a=new up.LogConfig;function r(...N){a.enabled&&i("log",...N)}let e=(...N)=>i("warn",...N),t=(...N)=>i("error",...N);function i(N,X,V,...J){o(N,X,"",V,...J)}function o(N,X,V,J,...R){J&&(a.format?console[N](`%c${X}%c ${J}`,"color: #666666; padding: 1px 3px; border: 1px solid #bbbbbb; border-radius: 2px; font-size: 90%; display: inline-block;"+V,"",...R):console[N](`[${X}] ${n.sprintf(J,...R)}`))}function u(N){if(a.enabled){N=N.originalEvent||N;let X="#5566cc";o("log",N.type,`color: white; border-color: ${X}; background-color: ${X}`,"Interaction on %o",N.target)}}function g(){if(!a.banner)return;let N=` __ _____  ___  ___  / /_ __
/ // / _ \\/ _ \\/ _ \\/ / // /  ${up.version}
\\___/_//_/ .__/\\___/_/\\_. / 
        / /            / /

`,X="";up.migrate.loaded||(X+=`Load unpoly-migrate.js to polyfill deprecated APIs.

`),a.enabled?X+="Call `up.log.disable()` to disable logging for this session.":X+="Call `up.log.enable()` to enable logging for this session.";let V="color: #777777";a.format?console.log("%c"+N+"%c"+X,"font-family: monospace;"+V,V):console.log(N+X)}up.on("up:framework:boot",g);function m(){a.enabled=!0}function L(){a.enabled=!1}return{puts:r,putsEvent:u,error:t,warn:e,config:a,enable:m,disable:L}}(),up.puts=up.log.puts,up.warn=up.log.warn},()=>{up.script=function(){let n=up.util,a=up.element,r=new up.Config(()=>({assetSelectors:["link[rel=stylesheet]","script[src]","[up-asset]"],noAssetSelectors:["[up-asset=false]"],nonceableAttributes:["up-watch","up-on-accepted","up-on-dismissed","up-on-loaded","up-on-rendered","up-on-finished","up-on-error","up-on-offline"],scriptSelectors:["script"],noScriptSelectors:['script[type="application/ld+json"]']})),e={"[up-back]":-100,"[up-clickable]":-200,"[up-drawer]":-200,"[up-modal]":-200,"[up-cover]":-200,"[up-popup]":-200,"[up-tooltip]":-200,"[up-dash]":-200,"[up-flashes]":-200,"[up-expand]":-300,"[data-method]":-400,"[data-confirm]":-400},t=[],i=[];function o(...C){L(C)}function u(...C){L(C,{macro:!0})}function g(...C){let[I,Z,te]=N(C),re=`[${I}]`;L([re,Z,B=>{let _=a.booleanOrStringAttr(B,I,Z.defaultValue);if(_)return te(B,_)}])}function m(C){C=n.evalOption(C);for(let I in e)if(C.indexOf(I)>=0)return e[I];up.fail("Unregistered priority for system macro %o",C)}function L(C,I={}){let Z=X(C,I);Z.macro?(up.framework.evaling&&(Z.priority||(Z.priority=m(Z.selector))),V(i,Z)):V(t,Z)}let N=function(C){let I=n.extractOptions(C),Z=C.shift(),te=C.pop(),re={...I,...n.extractOptions(C)};return[Z,re,te]};function X(C,I){let[Z,te,re]=N(C);return te=n.options(te,{selector:Z,isDefault:up.framework.evaling,priority:0,batch:!1}),Object.assign(re,te,I)}function V(C,I){let Z,te=0;for(;(Z=C[te])&&Z.priority>=I.priority;)te+=1;if(C.splice(te,0,I),up.framework.booted)if(I.priority===0)for(let re of up.layer.stack)J(re.element,{layer:re,compilers:[I]});else up.puts("up.compiler()","Compiler %s was registered after booting Unpoly. Compiler will run for future fragments only.",I.selector);return I}function J(C,I){up.emit(C,"up:fragment:compile",{log:!1});let Z=I.compilers||i.concat(t);new up.CompilerPass(C,Z,I).run()}function R(C,I){let Z=C.upDestructors;Z||(Z=[],C.upDestructors=Z,C.classList.add("up-can-clean")),n.isArray(I)?Z.push(...I):Z.push(I)}function U(C,I={}){return C=up.fragment.get(C,I),up.puts("up.hello()","Compiling fragment %o",C),J(C,I),up.fragment.emitInserted(C),C}function Q(C,I={}){new up.DestructorPass(C,I).run()}function ee(C){return C=up.fragment.get(C),C.upData||(C.upData=$(C))}function $(C){if(!C.getAttribute)return{};let I=C.getAttribute("up-data"),Z;return I&&(Z=JSON.parse(I),!n.isOptions(Z))?Z:{...C.dataset,...Z,...C.upCompileData}}function P(C=document.head){return C.querySelectorAll(r.selector("assetSelectors"))}function E(C,I){let Z=P(),te=n.map(Z,"outerHTML").join(),re=n.map(C,"outerHTML").join();te!==re&&up.event.assertEmitted("up:assets:changed",{oldAssets:Z,newAssets:C,renderOptions:I})}function v(C){C.type="up-disabled-script"}function F(C){let I=r.selector("scriptSelectors");n.each(a.subtree(C,I),v)}function w(){t=n.filter(t,"isDefault"),i=n.filter(i,"isDefault")}return up.on("up:framework:reset",w),{config:r,compiler:o,macro:u,attrCompiler:g,destructor:R,hello:U,clean:Q,data:ee,findAssets:P,assertAssetsOK:E,disableSubtree:F}}(),up.compiler=up.script.compiler,up.destructor=up.script.destructor,up.macro=up.script.macro,up.data=up.script.data,up.hello=up.script.hello,up.attribute=up.script.attrCompiler},()=>{up.history=function(){let n=up.util,a=up.element,r=new up.Config(()=>({enabled:!0,updateMetaTags:!0,restoreTargets:["body"],metaTagSelectors:["meta","link[rel=alternate]","link[rel=canonical]","link[rel=icon]","[up-meta]",'script[type="application/ld+json"]'],noMetaTagSelectors:["meta[http-equiv]","[up-meta=false]","meta[name=csp-nonce]"]})),e,t;function i(){e=void 0,t=void 0,u()}function o(){return n.normalizeURL(location.href)}function u(){let E=o();t!==E&&(e=t,t=E)}u();function g(E,v){return n.matchURLs(E,location.href,{hash:!0,...v})}function m(E,v={}){E=n.normalizeURL(E),X("replaceState",E)&&v.event!==!1&&N({location:E,reason:"replace",log:`Replaced state for ${E}`})}function L(E){E=n.normalizeURL(E),!g(E)&&X("pushState",E)&&N({location:E,reason:"push",log:`Advanced to location ${E}`})}function N(E){let v=up.event.build("up:location:changed",E);up.migrate?.renamedProperty?.(v,"url","location"),up.emit(v)}function X(E,v){if(r.enabled){let F=V();return window.history[E](F,"",v),u(),!0}}function V(){return{up:{}}}function J(E){if(!E?.up){up.puts("popstate","Ignoring a history state not owned by Unpoly");return}let v=o();up.error.muteUncriticalRejection(up.render({guardEvent:up.event.build("up:location:restore",{location:v,log:`Restoring location ${v}`}),url:v,target:r.restoreTargets,fail:!1,history:!0,location:v,peel:!0,layer:"root",cache:"auto",revalidate:"auto",saveScroll:!1,scroll:["restore","auto"],saveFocus:!1,focus:["restore","auto"]}))}function R(E){u();let v=o();N({location:v,reason:"pop",log:`Navigated to history entry ${v}`}),up.viewport.saveFocus({location:e}),up.viewport.saveScroll({location:e}),J(E.state)}function U(){window.addEventListener("popstate",R),up.protocol.initialRequestMethod()==="GET"&&m(o(),{event:!1})}up.on("up:framework:boot",function(){"jasmine"in window?U():setTimeout(U,100)});function Q(E=document.head){return E.querySelectorAll(r.selector("metaTagSelectors"))}function ee(E){let v=Q();for(let F of v)F.remove();for(let F of E)document.head.append(F)}function $(E=document){let{documentElement:v}=E;if(v.matches("html"))return E.documentElement.lang}function P(E){a.toggleAttr(a.root,"lang",E,!!E)}return up.macro("[up-back]",function(E){e&&(a.setMissingAttrs(E,{"up-href":e,"up-scroll":"restore"}),E.removeAttribute("up-back"),up.link.makeFollowable(E))}),up.on("up:framework:reset",i),{config:r,push:L,replace:m,get location(){return o()},get previousLocation(){return e},isLocation:g,findMetaTags:Q,updateMetaTags:ee,getLang:$,updateLang:P}}()},(n,a,r)=>{r(87);let e=up.util,t=up.element;up.fragment=function(){function i(d){let f=t.tagName(d);if(f.startsWith("up-"))return f}let o=new up.Config(()=>({badTargetClasses:[/^up-/],targetDerivers:["[up-id]","[id]","html","head","body","main","[up-main]",i,"link[rel][type]","link[rel=preload][href]","link[rel=preconnect][href]","link[rel=prefetch][href]","link[rel]","meta[property]","*[name]","form[action]","a[href]","[class]","[up-flashes]","form"],verifyDerivedTarget:!0,navigateOptions:{cache:"auto",revalidate:"auto",feedback:!0,fallback:!0,focus:"auto",scroll:"auto",history:"auto",peel:!0},match:"region",runScripts:!0,autoHistoryTargets:[":main"],autoFocus:["hash","autofocus","main-if-main","keep","target-if-lost"],autoScroll:["hash","layer-if-main"],autoRevalidate:d=>d.expired,skipResponse:u}));e.delegate(o,["mainTargets"],()=>up.layer.config.any);function u({response:d,expiredResponse:f}){return!d.text||d.text===f?.text}function g(d,f={}){return d=$(d,f),t.closestAttr(d,"up-source")}function m(d){return e.normalizeURL(d,{hash:!1})}function L(d){let f=t.closestAttr(d,"up-time");if(f&&f!=="false")return/^\d+$/.test(f)&&(f=Number(f)*1e3),new Date(f)}function N(d){let f=t.closestAttr(d,"up-etag");if(f&&f!=="false")return f}let X=up.mockable((...d)=>{let f=I(d);return new up.RenderJob(f).execute()}),V=up.mockable((...d)=>{let f=I(d);return X({...f,navigate:!0})});function J(d){return up.emit(d,"up:fragment:inserted",{log:["Inserted fragment %o",d]})}function R(d){let{oldElement:f,newElement:D,newData:j,renderOptions:se}=d,l=["Keeping fragment %o",f],h=t.callbackAttr(f,"up-on-keep",{exposedKeys:["newFragment","newData"]});return up.emit(f,"up:fragment:keep",{newFragment:D,newData:j,renderOptions:se,log:l,callback:h})}function U(d,f){let D=f.log??["Destroyed fragment %o",d],j=f.parent||document;return up.emit(j,"up:fragment:destroyed",{fragment:d,parent:j,log:D})}function Q(d){return!d.closest(".up-destroying")}function ee(d){return d.isConnected&&Q(d)}function $(...d){let f=e.extractOptions(d),D=d.pop(),j=d[0];return e.isElementish(D)?t.get(D):j?P(j,D,f):new up.FragmentFinder({selector:D,origin:f.origin,layer:f.layer,match:f.match}).find()}function P(...d){return E(...d)[0]}function E(...d){let f=e.extractOptions(d),D=d.pop(),j=d[0];return e.isElement(D)?[D]:e.isList(D)?D:new up.Selector(D,j,f).descendants(j)}function v(d,f,D={}){return new up.Selector(f,d,D).subtree(d)}function F(d,f){return e.isElement(f)?t.contains(d,f)&&up.layer.get(d).contains(f):v(d,f).length>0}function w(d,f,D){return new up.Selector(f,d,D).closest(d)}function C(...d){let f=I(d);return(f.element=$(f.target,f))&&new up.Change.DestroyFragment(f).execute(),up.migrate.formerlyAsync?.("up.destroy()")}function I(d){let f=e.parseArgIntoOptions(d,"target");return e.isElement(f.target)&&(f.origin||(f.origin=f.target)),f}function Z(d){d.classList.add("up-destroying"),d.setAttribute("aria-hidden","true")}function te(...d){let f=I(d);f.target||(f.target=":main");let D=$(f.target,f);return f.url||(f.url=g(D)),f.headers=e.merge(f.headers,re(D)),(f.keepData||t.booleanAttr(D,"up-keep-data"))&&(f.data=up.data(D)),up.migrate.postprocessReloadOptions?.(f),X(f)}function re(d){let f={},D=L(d);D&&(f["If-Modified-Since"]=D.toUTCString());let j=N(d);return j&&(f["If-None-Match"]=j),f}function S(d,f){return V({...f,url:d})}let B=/^(onFail|on|fail)?(.+)$/;function _(d){let f=B.exec(d);if(f){let[D,j,se]=f;switch(j){case"onFail":return"on"+e.upperCaseFirst(se);case"fail":return e.lowerCaseFirst(se)}}}function x(d){let f=B.exec(d);if(f){let[D,j,se]=f;switch(j){case"on":return"onFail"+e.upperCaseFirst(se);case void 0:return"fail"+e.upperCaseFirst(se)}}}function G(d,f){return e.presence(d,e.isString)||H(d,f)||b(d)}function T(d){return!!H(d)}function p(d){return`Cannot derive good target selector from a <${t.tagName(d)}> element without identifying attributes. Try setting an [id] or configure up.fragment.config.targetDerivers.`}function b(d){throw new up.CannotTarget(p(d))}function H(d,f){return e.findResult(o.targetDerivers,function(D){let j=Y(d,D);if(j&&ae(j,d,f))return j})}function Y(d,f){if(e.isFunction(f))return f(d);if(d.matches(f))try{return q(d,f)}catch(D){if(D instanceof up.CannotParse)return f;throw D}}function q(d,f){let{includePath:D,excludeRaw:j}=up.element.parseSelector(f);if(D.length!==1)throw new up.CannotParse(f);let{tagName:se,id:l,classNames:h,attributes:k}=D[0],z="";se==="*"?z+=t.tagName(d):se&&(z+=se);for(let oe of h)z+=t.classSelector(oe);l&&(z+=t.idSelector(l));for(let oe in k){let pe=k[oe]||d.getAttribute(oe);if(oe==="id")z+=t.idSelector(pe);else if(oe==="class")for(let ce of M(d))z+=t.classSelector(ce);else z+=t.attrSelector(oe,pe)}return j&&(z+=j),z}function ae(d,f,D={}){return!ee(f)||!o.verifyDerivedTarget||up.fragment.get(d,{layer:f,...D})===f}function A(d,f){return e.isRegExp(d)?d.test(f):d===f}function M(d){let f=D=>!e.some(o.badTargetClasses,j=>A(j,D));return e.filter(d.classList,f)}let K=/:main\b/,ne=/:layer\b/,ue=/:origin\b/;function de(d){return K.test(d)}function me(d,f={}){let{layer:D}=f;D!=="new"&&!(D instanceof up.Layer)&&up.fail("Must pass an up.Layer as { layer } option, but got %o",D),d=e.copy(e.wrapList(d));let j=[];for(;d.length;){let se=d.shift();if(se===!0&&(se=":main"),de(se)){let l=ge(f),h=up.layer.mainTargets(l).map(k=>se.replace(K,k));d.unshift(...h)}else if(ne.test(se)){if(D==="new"||D.opening)continue;let l=G(D.getFirstSwappableElement(),f);d.unshift(se.replace(ne,l))}else e.isElementish(se)?j.push(G(se,f)):e.isString(se)&&j.push(ke(se,f))}return e.uniq(j)}function ge({layer:d,mode:f}){return d==="new"?f||up.fail('Must pass a { mode } option together with { layer: "new" }'):d.mode}function xe(d,{origin:f}={}){return d.replace(ue,function(D){if(f)return G(f);up.fail('Missing { origin } element to resolve "%s" reference (found in %s)',D,d)})}function ke(...d){return(up.migrate.resolveOrigin||xe)(...d)}function be(d){return e.parseTokens(d,{separator:"comma"})}function Ae(d,f={}){let D=f.defaultPlacement||"swap",j=f.defaultMaybe??!1,se=[],l=be(d);for(let h of l){if(h===":none")continue;let k=D,z=j;h=h.replace(/\b::?(before|after)\b/,(pe,ce)=>(k=ce,"")),h=h.replace(/\b:maybe\b/,()=>(z=!0,""));let oe={...f,selector:h,placement:k,maybe:z,originalRenderOptions:f};se.push(oe)}return se}function ye(d,f){let D=me(o.autoHistoryTargets,{layer:f}).join();for(let j of d)if(t.subtree(j,D).length)return!0;return up.puts("up.render()","Will not auto-update history because fragment doesn't contain a selector from up.fragment.config.autoHistoryTargets"),!1}function Se(d,f,D={}){if(d=t.get(d),e.isElement(f)){let j=H(f);return j&&d.matches(j)}else return new up.Selector(f,d,D).matches(d)}function Re(d,f,D={}){return d.fromCache&&e.evalAutoOption(D.revalidate,o.autoRevalidate,f)}function Oe(d){let f=d.filter(j=>!j.maybe||j.oldElement?.isConnected);return e.map(f,"selector").join(", ")||":none"}function ve(d,f){return e.some(d,function(D){return D!==f&&(D.placement==="swap"||D.placement==="content")&&D.oldElement.contains(f.oldElement)})}function _e(d){if(d.length<2)return d;let f=e.uniqBy(d,"oldElement");return f=e.reject(f,D=>ve(f,D)),f}function Ee(...d){let f=I(d),D,{reason:j,newLayer:se}=f,l;if(f.target)l=E(f.target,f),D=k=>k.isPartOfSubtree(l),j||(j="Aborting requests within fragment");else{let k=up.layer.getAll(f);l=e.map(k,"element"),D=z=>e.contains(k,z.layer),j||(j="Aborting requests within "+k.join(", "))}let h=k=>k.abortable&&D(k);up.network.abort(h,{...f,reason:j});for(let k of l)up.emit(k,"up:fragment:aborted",{reason:j,newLayer:se,log:!1})}function Te(d,f){let D=se=>se.target.contains(d),j=up.on("up:fragment:aborted",{guard:D},f);return up.destructor(d,j),j}function Ie(d,f,{margin:D=0}={}){if(t.isIntersectingWindow(d,{margin:D})){f();return}function j(h){for(let k of h)if(k.isIntersecting){l(),f();return}}let se=new IntersectionObserver(j,{rootMargin:`${D}px`}),l=()=>se.disconnect();se.observe(d),Te(d,l)}return up.on("up:framework:boot",function(){let{documentElement:d}=document;if(d.setAttribute("up-source",m(location.href)),up.hello(d),!up.browser.canPushState())return up.warn("Cannot push history changes. Next fragment update will load in a new page.")}),{config:o,reload:te,destroy:C,render:X,navigate:V,get:$,getDumb:P,all:E,subtree:v,contains:F,closest:w,source:g,normalizeSource:m,visit:S,markAsDestroying:Z,emitInserted:J,emitDestroyed:U,emitKeep:R,successKey:_,failKey:x,expandTargets:me,resolveOrigin:ke,toTarget:G,tryToTarget:H,isTargetable:T,matches:Se,hasAutoHistory:ye,time:L,etag:N,shouldRevalidate:Re,abort:Ee,onAborted:Te,onFirstIntersect:Ie,splitTarget:be,parseTargetSteps:Ae,isAlive:ee,isNotDestroying:Q,targetForSteps:Oe,compressNestedSteps:_e,containsMainPseudo:de}}(),up.reload=up.fragment.reload,up.destroy=up.fragment.destroy,up.render=up.fragment.render,up.navigate=up.fragment.navigate,up.visit=up.fragment.visit,e.delegate(up,["context"],()=>up.layer.current)},(n,a,r)=>{"use strict";r.r(a)},(n,a,r)=>{r(89),up.viewport=function(){let e=up.util,t=up.element,i=up.fragment,o=new up.Config(()=>({viewportSelectors:["[up-viewport]","[up-fixed]"],fixedTopSelectors:["[up-fixed~=top]"],fixedBottomSelectors:["[up-fixed~=bottom]"],anchoredRightSelectors:["[up-anchored~=right]","[up-fixed~=top]","[up-fixed~=bottom]","[up-fixed~=right]"],revealSnap:200,revealPadding:0,revealTop:!1,revealMax(){return .5*window.innerHeight},autoFocusVisible({element:A,inputDevice:M}){return M==="key"||up.form.isField(A)}})),u=new up.BodyShifter;up.compiler(o.selectorFn("anchoredRightSelectors"),function(A){return u.onAnchoredElementInserted(A)});function g(A,M){return M=e.options(M),A=i.get(A,M),(M.layer=up.layer.get(A))||up.fail("Cannot reveal a detached element"),M.peel&&M.layer.peel(),new up.RevealMotion(A,M).start(),up.migrate.formerlyAsync?.("up.reveal()")||!0}function m(A,{preventScroll:M,force:K,inputDevice:ne,focusVisible:ue}={}){if(K&&!A.hasAttribute("tabindex")&&A.tabIndex===-1&&A.setAttribute("tabindex","-1"),ne??(ne=up.event.inputDevice),ue??(ue="auto"),ue=e.evalAutoOption(ue,o.autoFocusVisible,{element:A,inputDevice:ne}),A.focus({preventScroll:!0,focusVisible:ue}),L(A),A.classList.add(ue?"up-focus-visible":"up-focus-hidden"),!M)return g(A)}function L(A){A?.classList.remove("up-focus-hidden","up-focus-visible")}up.on("focusin",function({relatedTarget:A}){L(A)});function N(A,M){return m(A,M),A===document.activeElement}function X(A=location.hash,M){let K=p(A,M);if(K)return up.reveal(K,{top:!0})}function V(){return[ee(),...o.viewportSelectors].join()}function J(A,M={}){return i.get(A,M).closest(V())}function R(A,M={}){return A=i.get(A,M),t.subtree(A,V())}function U(A,M={}){return A=i.get(A,M),t.around(A,V())}function Q(A={}){return i.all(V(),A)}function ee(){return $().tagName}function $(){return document.scrollingElement}function P(){return t.root.clientWidth}function E(){return t.root.clientHeight}function v(A){return A===$()}function F(){return window.innerWidth-P()}function w(A){return up.fragment.tryToTarget(A)}function C(A=document){let M=["[up-fixed]"].concat(o.fixedTopSelectors).concat(o.fixedBottomSelectors);return A.querySelectorAll(M.join())}function I(...A){let[M,K]=_(A),ne=K.location||K.layer.location;if(ne){let ue=Z(M);K.layer.lastScrollTops.set(ne,ue)}}function Z(A){let M={};for(let K of A){let ne=w(K);ne?M[ne]=K.scrollTop:up.warn("up.viewport.saveScroll()","Cannot save scroll positions for untargetable viewport %o",K)}return M}function te(...A){let[M,K]=_(A),{location:ne}=K.layer,ue=K.layer.lastScrollTops.get(ne);return ue?(G(M,ue),up.puts("up.viewport.restoreScroll()","Restored scroll positions to %o",ue),!0):!1}function re(A={}){let M=up.layer.get(A),K=A.location||M.location;if(K){let ne=up.FocusCapsule.preserve(M);M.lastFocusCapsules.set(K,ne)}}function S(A={}){let M=up.layer.get(A),K=A.location||M.location,ne=A.layer.lastFocusCapsules.get(K);return ne&&ne.restore(M)?(up.puts("up.viewport.restoreFocus()",'Restored focus to "%s"',ne.target),!0):!1}function B(){return new up.FIFOCache({capacity:30,normalizeKey:e.matchableURL})}function _(A){let M=e.copy(e.extractOptions(A));M.layer=up.layer.get(M);let K;return A[0]?K=[J(A[0],M)]:M.around?K=U(M.around,M):K=Q(M),[K,M]}function x(...A){let[M,K]=_(A);G(M,{})}function G(A,M){for(let K of A){let ne=w(K);K.scrollTop=M[ne]||0}}function T(A,M={}){let ne=J(A).getBoundingClientRect(),ue=A.getBoundingClientRect(),de=new up.Rect({left:ue.left-ne.left,top:ue.top-ne.top,width:ue.width,height:ue.height});M.afterMeasure?.(),t.setStyle(A,{position:A.style.position==="static"?"static":"relative",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"100%",height:"100%"});let me=t.createFromSelector("up-bounds");t.insertBefore(A,me),me.appendChild(A);let ge=function(ke,be){return de.left+=ke,de.top+=be,t.setStyle(me,de,"px")};ge(0,0);let xe=A.getBoundingClientRect();return ge(ue.left-xe.left,ue.top-xe.top),e.each(C(A),t.fixedToAbsolute),{bounds:me,moveBounds:ge}}function p(A,M={}){if(A=b(A)){let K=[t.attrSelector("id",A),"a"+t.attrSelector("name",A)].join();return i.get(K,M)}}function b(A){return A?.replace(/^#/,"")}function H(A){let M=document.activeElement;if(up.fragment.contains(A,M))return M}let Y=["selectionStart","selectionEnd","scrollLeft","scrollTop"];function q(A,M={}){for(let K of Y)try{M[K]=A[K]}catch{}return M}let ae=!1;return up.on("scroll",{once:!0,beforeBoot:!0},()=>ae=!0),up.on("up:framework:boot",function(){e.task(function(){if(!ae)return X()})}),up.on(window,"hashchange",()=>X()),{reveal:g,revealHash:X,firstHashTarget:p,config:o,get:J,subtree:R,around:U,get root(){return $()},rootWidth:P,rootHeight:E,isRoot:v,rootScrollbarWidth:F,saveScroll:I,restoreScroll:te,resetScroll:x,saveFocus:re,restoreFocus:S,absolutize:T,focus:m,tryFocus:N,newStateCache:B,focusedElementWithin:H,copyCursorProps:q,bodyShifter:u}}(),up.focus=up.viewport.focus,up.reveal=up.viewport.reveal},(n,a,r)=>{"use strict";r.r(a)},()=>{up.motion=function(){let n=up.util,a=up.element,r={},e={},t=new up.MotionController("motion"),i=new up.Config(()=>({duration:175,easing:"ease",enabled:!matchMedia("(prefers-reduced-motion: reduce)").matches}));function o(S){return n.pickBy(S,"isDefault")}function u(){t.reset(),r=o(r),e=o(e)}function g(){return i.enabled}function m(S,B,_){S=up.fragment.get(S),_=n.options(_);let x=$(B),G=L(S,B,_);if(x=up.error.guardFn(x),G){let T=()=>x(S,_);return t.startFunction(S,T,_)}else return N(S,B)}function L(S,B,_){return V(_),g()&&!w(B)&&_.duration>0&&!a.isSingleton(S)}function N(S,B){return n.isOptions(B)&&a.setStyle(S,B),Promise.resolve()}function X(S,B,_){return up.migrate.loaded&&(B=up.migrate.fixStyleProps(B)),_={..._,finishEvent:t.finishEvent},new up.CSSTransition(S,B,_).start()}function V(S){S.easing??(S.easing=i.easing),S.duration??(S.duration=i.duration)}function J(S){return r[S]||up.fail("Unknown animation %o",S)}function R(S){return t.finish(S)}function U(S,B,_,x){x=n.options(x),V(x),S=up.fragment.get(S),B=up.fragment.get(B);let G=Q(_),T=L(S,G,x);G=up.error.guardFn(G);let p=n.pluckKey(x,"beforeStart")||n.noop,b=n.pluckKey(x,"afterInsert")||n.noop,H=n.pluckKey(x,"beforeDetach")||n.noop,Y=n.pluckKey(x,"afterDetach")||n.noop,q=n.pluckKey(x,"scrollNew")||n.noop;if(p(),T){if(t.isActive(S)&&x.trackMotion===!1)return G(S,B,x);up.puts("up.morph()","Morphing %o to %o with transition %O over %d ms",S,B,_,x.duration);let ae=up.viewport.get(S),A=ae.scrollTop,M=up.viewport.absolutize(S,{afterMeasure(){a.insertBefore(S,B),b()}}),K=async function(){q();let ne=ae.scrollTop;M.moveBounds(0,ne-A),await G(S,B,x),H(),M.bounds.remove(),Y()};return t.startFunction([S,B],K,x)}else return H(),P(S,B),b(),Y(),q(),Promise.resolve()}function Q(S){if(!w(S)){if(n.isFunction(S))return S;if(n.isArray(S))return ee(...S);if(n.isString(S)){let B;if(S.indexOf("/")>=0)return ee(...S.split("/"));if(B=e[S])return Q(B)}else up.fail("Unknown transition %o",S)}}function ee(S,B){if(!w(S)&&!w(B)){let _=$(S)||n.asyncNoop,x=$(B)||n.asyncNoop;return(G,T,p)=>Promise.all([_(G,p),x(T,p)])}}function $(S){if(!w(S)){if(n.isFunction(S))return S;if(n.isString(S))return J(S);if(n.isOptions(S))return(B,_)=>X(B,S,_);up.fail("Unknown animation %o",S)}}let P=up.mockable(function(S,B){S.replaceWith(B)});function E(S,B,_){B=n.options(B);let x=new up.OptionsParser(S,B,_);return x.booleanOrString("animation"),x.booleanOrString("transition"),x.string("easing"),x.number("duration"),B}function v(S,B){let _=Q(B);_.isDefault=up.framework.evaling,e[S]=_}function F(S,B){let _=$(B);_.isDefault=up.framework.evaling,r[S]=_}up.on("up:framework:boot",function(){g()||up.puts("up.motion","Animations are disabled")});function w(S){return!S||S==="none"}function C(S,B,_){F(S,function(x,G){return x.style.opacity=0,a.setStyle(x,{opacity:B}),X(x,{opacity:_},G)})}C("fade-in",0,1),C("fade-out",1,0);function I(S,B){return{transform:`translate(${S}px, ${B}px)`}}function Z(){return{transform:""}}function te(S){return a.setStyle(S,Z()),S.getBoundingClientRect()}function re(S,B){let _=`move-to-${S}`,x=`move-from-${S}`;F(_,function(G,T){let p=te(G),b=B(p);return X(G,b,T)}),F(x,function(G,T){let p=te(G),b=B(p);return a.setStyle(G,b),X(G,Z(),T)})}return re("top",function(S){let B=S.top+S.height;return I(0,-B)}),re("bottom",function(S){let B=up.viewport.rootHeight()-S.top;return I(0,B)}),re("left",function(S){let B=S.left+S.width;return I(-B,0)}),re("right",function(S){let B=up.viewport.rootWidth()-S.left;return I(B,0)}),v("cross-fade",["fade-out","fade-in"]),v("move-left",["move-to-left","move-from-right"]),v("move-right",["move-to-right","move-from-left"]),v("move-up",["move-to-top","move-from-bottom"]),v("move-down",["move-to-bottom","move-from-top"]),up.on("up:framework:reset",u),{morph:U,animate:m,finish:R,finishCount(){return t.finishCount},transition:v,animation:F,config:i,isEnabled:g,isNone:w,willAnimate:L,swapElementsDirectly:P,motionOptions:E}}(),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate},(n,a,r)=>{r(92);let e=up.util;up.network=function(){let t=new up.Config(()=>({concurrency:6,wrapMethod:!0,cacheSize:70,cacheExpireAge:15e3,cacheEvictAge:54e5,badResponseTime:400,fail(v){return(v.status<200||v.status>299)&&v.status!==304},autoCache(v){return v.isSafe()},expireCache(v,F){return!v.isSafe()},evictCache:!1,progressBar:!0,timeout:9e4})),i=new up.Request.Queue,o=new up.Request.Cache,u=null;function g(){Q(),i.reset(),o.reset(),u?.destroy(),u=null}function m(...v){let F=L(v),w=new up.Request(F);return N(w),w}function L(v){let F=e.extractOptions(v);return F.url||(F.url=v[0]),up.migrate.handleRequestOptions?.(F),F}function N(v){X(v)||V(v)}function X(v){let F;if(v.willCache()&&(F=o.get(v)))return up.puts("up.request()","Re-using previous request to %s",v.description),v.background||i.promoteToForeground(F),F.mergeIfUnsent(v),o.track(F,v,{onIncompatible:N}),!0}function V(v){return J(v),i.asap(v),!0}function J(v){v.willCache()&&(o.put(v),v.onLoading=()=>o.reindex(v)),e.always(v,function(F){let w=F.expireCache??v.expireCache??e.evalOption(t.expireCache,v,F);w&&o.expire(w,{except:v});let C=F.evictCache??v.evictCache??e.evalOption(t.evictCache,v,F);C&&o.evict(C,{except:v});let I=o.get(v),Z=F instanceof up.Response,te=!Z,re=Z&&F.ok,S=Z&&!F.ok,B=Z&&F.none;S?o.evict(v.url):te||B?o.evict(v):re&&I&&o.put(v)})}function R(){return i.isBusy()}function U(v){new up.Request(v).loadPage()}function Q(...v){up.migrate.preprocessAbortArgs?.(v),i.abort(...v)}function ee(v,F){if(v.cache&&F.url&&v.url!==F.url){let w=e.variant(v,{method:F.method,url:F.url,cacheRoute:null});o.alias(v,w)}}function $(v){return e.contains(["GET","OPTIONS","HEAD"],e.normalizeMethod(v))}function P(){e.evalOption(t.progressBar)&&(u=new up.ProgressBar)}function E(){u?.conclude()}return up.on("up:network:late",P),up.on("up:network:recover",E),up.on("up:framework:reset",g),{request:m,cache:o,isBusy:R,isSafeMethod:$,config:t,abort:Q,registerAliasForRedirect:ee,queue:i,loadPage:U}}(),up.request=up.network.request,up.cache=up.network.cache},(n,a,r)=>{"use strict";r.r(a)},(n,a,r)=>{r(94);let e=up.util,t=up.element;up.layer=function(){let i=[up.Layer.Root,up.Layer.Modal,up.Layer.Popup,up.Layer.Drawer,up.Layer.Cover],o=new up.Config(function(){let w={mode:"modal",any:{mainTargets:["[up-main='']","main",":layer"]},root:{mainTargets:["[up-main~=root]"],history:!0},overlay:{mainTargets:["[up-main~=overlay]"],openAnimation:"fade-in",closeAnimation:"fade-out",dismissLabel:"\xD7",dismissAriaLabel:"Dismiss dialog",dismissable:!0,history:"auto"},cover:{mainTargets:["[up-main~=cover]"]},drawer:{mainTargets:["[up-main~=drawer]"],backdrop:!0,position:"left",size:"medium",openAnimation(C){switch(C.position){case"left":return"move-from-left";case"right":return"move-from-right"}},closeAnimation(C){switch(C.position){case"left":return"move-to-left";case"right":return"move-to-right"}}},modal:{mainTargets:["[up-main~=modal]"],backdrop:!0,size:"medium"},popup:{mainTargets:["[up-main~=popup]"],position:"bottom",size:"medium",align:"left",dismissable:"outside key"},foreignOverlaySelectors:["dialog"]};for(let C of i)w[C.mode].Class=C;return w}),u=null,g=[];function m(w){return e.flatMap(L(w),"mainTargets")}function L(w){return w==="root"?[o.root,o.any]:[o[w],o.overlay,o.any]}function N(w){if(!(w.layer instanceof up.Layer))if(up.migrate.handleLayerOptions?.(w),e.isGiven(w.layer)){let C=String(w.layer).match(/^(new|shatter|swap)( (\w+))?/);if(C){w.layer="new";let I=C[1],Z=C[3];w.mode||(w.mode=Z||o.mode),I==="swap"?up.layer.isOverlay()&&(w.baseLayer="parent"):I==="shatter"&&(w.baseLayer="root")}}else w.mode?w.layer="new":e.isElementish(w.target)?w.layer=u.get(w.target,{normalizeLayerOptions:!1}):w.origin?w.layer="origin":w.layer="current"}function X(w){w.baseLayer instanceof up.Layer||(w.baseLayer=u.get("current",{...w,normalizeLayerOptions:!1}))}function V(w){N(w),w.context??(w.context={}),X(w)}function J(w,C){let{mode:I}=w,{Class:Z}=o[I],te=e.reverse(L(I)),re=up.migrate.handleLayerConfig;return re&&te.forEach(re),w.openAnimation??(w.openAnimation=e.pluckKey(w,"animation")),w=e.mergeDefined(...te,{mode:I,stack:u},w),C&&(w=C(w)),new Z(w)}function R(w,C){return t.callbackAttr(w,C,{exposedKeys:["layer"]})}function U(w,C){return t.callbackAttr(w,C,{exposedKeys:["layer","value","response"]})}function Q(){u.reset(),g=e.filter(g,"isDefault")}async function ee(w){return w=e.options(w,{layer:"new",defaultToEmptyContent:!0,navigate:!0}),(await up.render(w)).layer}function $(w){return new Promise(function(C,I){w={...w,onAccepted:Z=>C(Z.value),onDismissed:Z=>I(Z.value)},ee(w)})}function P(){return e.map(i,w=>w.selector()).join()}function E(w){return e.isString(w)?`layer "${w}"`:w.toString()}function v(w){let C=o.selector("foreignOverlaySelectors");return!!(C&&w.closest(C))}up.on("up:fragment:destroyed",function(){u.sync()}),up.on("up:framework:evaled",function(){u=new up.LayerStack}),up.on("up:framework:reset",Q);let F={config:o,mainTargets:m,open:ee,build:J,ask:$,normalizeOptions:V,openCallbackAttr:R,closeCallbackAttr:U,anySelector:P,optionToString:E,get stack(){return u.layers},isWithinForeignOverlay:v};return e.delegate(F,["get","getAll","root","overlays","current","front","sync","count","dismissOverlays"],()=>u),e.delegate(F,["accept","dismiss","isRoot","isOverlay","isFront","on","off","emit","parent","history","location","mode","context","element","contains","size","affix"],()=>u.current),F}()},(n,a,r)=>{"use strict";r.r(a)},(n,a,r)=>{r(96),up.link=function(){let e=up.util,t=up.element,i=null,o="[up-content], [up-fragment], [up-document]",u=`${o}, [up-target], [up-layer], [up-transition], [up-preload]`,g="a[href], button",m=new up.Config(()=>({followSelectors:["[up-follow]",`a:is(${u})`],noFollowSelectors:["[up-follow=false]","a[download]","a[target]",'a[href^="javascript:"]','a[href^="mailto:"]',`a[href^="#"]:not(${o})`,t.crossOriginSelector("href"),t.crossOriginSelector("up-href")],instantSelectors:["[up-instant]"],noInstantSelectors:["[up-instant=false]","[onclick]"],preloadSelectors:["[up-preload]"],noPreloadSelectors:["[up-preload=false]"],clickableSelectors:["[up-clickable]","[up-follow]","[up-emit]","[up-accept]","[up-dismiss]",`a:is(${u})`],noClickableSelectors:["[up-clickable=false]",g],preloadDelay:90}));function L(_){return!up.browser.canPushState()||!P(_)||!N(_)}function N(_){let x=J(_);if(x.url)return x.cache==null&&(x.cache="auto"),x.basic=!0,new up.Request(x).willCache()}function X(){i=null}let V=up.mockable(function(_,x,G){return up.render(R(_,x,G))});function J(_,x,G){x=e.options(x);let T=new up.OptionsParser(_,x,{...G,fail:!1});return x.url=$(_,x),x.method=ee(_,x),T.json("headers"),T.json("params"),T.booleanOrString("cache"),T.booleanOrString("expireCache"),T.booleanOrString("evictCache"),T.booleanOrString("revalidate"),T.booleanOrString("abort"),T.boolean("abortable"),T.boolean("background"),T.string("contentType"),T.number("badResponseTime"),T.number("timeout"),x}function R(_,x,G){_=up.fragment.get(_),x=e.options(x);let T=new up.OptionsParser(_,x,{fail:!0,...G});return T.include(J),T.boolean("feedback"),x.origin||(x.origin=_),T.boolean("fail"),T.boolean("navigate",{default:!0}),T.string("confirm",{attr:["up-confirm","data-confirm"]}),T.string("target"),T.booleanOrString("fallback"),T.string("match"),T.string("content"),T.string("fragment"),T.string("document"),T.boolean("useKeep"),T.boolean("useHungry"),T.callback("onLoaded"),T.callback("onRendered",{mainKey:"result"}),T.callback("onFinished",{mainKey:"result"}),T.callback("onOffline",{mainKey:"error"}),T.callback("onError",{mainKey:"error"}),T.boolean("peel"),T.string("layer"),T.string("baseLayer"),T.json("context"),T.string("mode"),T.string("align"),T.string("position"),T.string("class"),T.string("size"),T.booleanOrString("dismissable"),T.parse(up.layer.openCallbackAttr,"onOpened"),T.parse(up.layer.closeCallbackAttr,"onAccepted"),T.parse(up.layer.closeCallbackAttr,"onDismissed"),T.string("acceptEvent"),T.string("dismissEvent"),T.string("acceptLocation"),T.string("dismissLocation"),T.booleanOrString("history"),T.booleanOrString("focus"),T.boolean("saveScroll"),T.boolean("saveFocus"),T.booleanOrString("scroll"),T.boolean("revealTop"),T.number("revealMax"),T.number("revealPadding"),T.number("revealSnap"),T.string("scrollBehavior"),T.booleanOrString("history"),T.booleanOrString("location"),T.booleanOrString("title"),T.boolean("metaTags"),T.booleanOrString("lang"),T.include(up.motion.motionOptions),x.guardEvent??(x.guardEvent=up.event.build("up:link:follow",{log:["Following link %o",_]})),x}function U(_,x){_=up.fragment.get(_);let G=Q(_);if(G)return Promise.reject(new up.Error(G));let T=up.event.build("up:link:preload",{log:["Preloading link %o",_]});return V(_,{abortable:!1,...x,guardEvent:T,preload:!0})}function Q(_){if(!re(_))return"Will not preload an unsafe link"}function ee(_,x={}){return e.normalizeMethod(x.method||_.getAttribute("up-method")||_.getAttribute("data-method"))}function $(_,x={}){let G=x.url||_.getAttribute("up-href")||_.getAttribute("href");if(G!=="#")return G}function P(_){return _=up.fragment.get(_),m.matches(_,"followSelectors")}function E(_){P(_)||_.setAttribute("up-follow","")}function v(_){let x=_.matches("a, [up-follow]")?"link":"button";t.setMissingAttrs(_,{tabindex:"0",role:x,"up-clickable":""}),_.addEventListener("keydown",function(G){if(G.key==="Enter"||_.role==="button"&&G.key==="Space")return te(G)})}up.macro(m.selectorFn("clickableSelectors"),v);function F(_,x){if(_.defaultPrevented)return!1;let G=`a, [up-follow], ${up.form.fieldSelector()}`,T=_.target.closest(G);return!T||T===x}function w(_){let x=_.closest(m.selector("instantSelectors"));return x&&!C(x)}function C(_){return m.matches(_,"noInstantSelectors")||m.matches(_,"noFollowSelectors")}function I(_){_.on("click",function(x,G){if(up.event.isUnmodified(x))return w(G)&&i?up.event.halt(x):(up.event.inputDevice==="key"||up.event.isSyntheticClick(x)||_.wasHitByMouseEvent(x)&&!Z(x))&&te(x),i=null}),_.on("mousedown",function(x,G){up.event.isUnmodified(x)&&(i=x.target,w(G)&&te(x))})}function Z(_){return i&&i!==_.target}function te(_){let x=["clientX","clientY","button",...up.event.keyModifiers],G=up.event.fork(_,"up:click",x);up.emit(_.target,G,{log:!1})}function re(_){let x=ee(_);return up.network.isSafeMethod(x)}function S(_,x,G){switch(_){case"insert":G();break;case"reveal":{let T=t.numberAttr(x,"up-intersect-margin");up.fragment.onFirstIntersect(x,G,{margin:T});break}case"hover":new up.LinkFollowIntent(x,G);break;case"manual":break}}function B(_,x){let T={navigate:!1,guardEvent:up.event.build("up:deferred:load",{log:["Loading deferred %o",_]}),...x};return V(_,T,{defaults:{target:":origin",cache:"auto",revalidate:"auto",feedback:!0}})}return up.attribute("up-defer",{defaultValue:"insert"},function(_,x){S(x,_,()=>up.error.muteUncriticalRejection(B(_)))}),up.on("up:click",m.selectorFn("followSelectors"),function(_,x){F(_,x)&&(up.event.halt(_,{log:!0}),up.focus(x,{preventScroll:!0}),up.error.muteUncriticalRejection(V(x)))}),up.attribute("up-expand",{defaultValue:"a, [up-href]",macro:!0},function(_,x){let G=t.get(_,x);G&&(t.setMissingAttrs(_,{"up-href":t.attr(G,"href"),...t.upAttrs(G)}),_.classList.add(...t.upClasses(G)),E(_))}),up.compiler(m.selectorFn("preloadSelectors"),function(_){if(!L(_)){let x=()=>up.error.muteUncriticalRejection(U(_)),G=t.booleanOrStringAttr(_,"up-preload",null)??"hover";S(G,_,x)}}),up.on("up:framework:reset",X),{follow:V,followOptions:R,requestOptions:J,preload:U,makeFollowable:E,isSafe:re,isFollowable:P,shouldFollowEvent:F,convertClicks:I,config:m,loadDeferred:B}}(),up.follow=up.link.follow,up.deferred={load:up.link.loadDeferred}},(n,a,r)=>{"use strict";r.r(a)},()=>{up.form=function(){let n=up.util,a=up.element,r=new up.Config(()=>({groupSelectors:["[up-form-group]","fieldset","label","form"],fieldSelectors:["select","input:not([type=submit]):not([type=image])","button[type]:not([type=submit])","textarea"],submitSelectors:["form:is([up-submit], [up-target], [up-layer], [up-transition])"],noSubmitSelectors:["[up-submit=false]","[target]",a.crossOriginSelector("action")],submitButtonSelectors:["input[type=submit]","input[type=image]","button[type=submit]","button:not([type])"],watchInputEvents:["input","change"],watchInputDelay:0,watchChangeEvents:["change"]}));function e(p=""){return r.fieldSelectors.map(b=>b+p).join()}function t(p){return p.matches(e())}function i(p){p=a.get(p);let b=a.subtree(p,e());if(p.matches("form[id]")){let H=e(a.attrSelector("form",p.getAttribute("id"))),Y=up.fragment.all(H,{layer:p});b.push(...Y),b=n.uniq(b)}return b}function o(p){return a.subtree(p,g())}function u(p){return p?.matches(g())}function g(){return r.selector("submitButtonSelectors")}let m=up.mockable((p,b)=>up.render(L(p,b)));function L(p,b,H){p=B(p),b=n.options(b);let Y=new up.OptionsParser(p,b,H);return Y.include(Q),Y.string("failTarget",{default:up.fragment.tryToTarget(p)}),Y.booleanOrString("disable"),b.guardEvent||(b.guardEvent=up.event.build("up:form:submit",{submitButton:b.submitButton,log:"Submitting form",params:b.params,form:p})),b.origin||(b.origin=up.viewport.focusedElementWithin(p)||b.submitButton||p),Y.include(up.link.followOptions),b}function N(p,b,H={}){b=n.options(b);let Y=new up.OptionsParser(p,b,{...H,closest:!0,attrPrefix:"up-watch-"});Y.boolean("feedback"),Y.booleanOrString("disable"),Y.string("event"),Y.number("delay");let q=up.form.config;return b.event==="input"?(b.event=n.evalOption(q.watchInputEvents,p),b.delay??(b.delay=q.watchInputDelay)):b.event==="change"&&(b.event=n.evalOption(q.watchChangeEvents,p)),b.origin||(b.origin=p),b}function X(p){let b=document.activeElement,H,Y=[...i(p),...o(p)];for(let q of Y)q===b&&(H=v(b)),V(q);return H&&up.focus(H,{force:!0,preventScroll:!0}),function(){Y.forEach(J)}}function V(p){p.upDisableCount||(p.upDisableCount||(p.upDisableCount=0),p.upOriginalDisabled=p.disabled),p.upDisableCount++,p.disabled=!0}function J(p){p.upDisableCount&&(p.disabled?(p.upDisableCount--,p.upDisableCount||(p.disabled=p.upOriginalDisabled)):p.upDisableCount=0)}function R(p,b){let H=U(b);n.always(p,H)}function U({disable:p,origin:b}){if(!p)return n.noop;let H=A=>{up.fail("Cannot process { disable: '%s' } option without { %s }",p,A)},Y=()=>b||H("origin"),q=()=>_(Y()),ae;return p===!0?ae=[q()]:n.isString(p)&&(ae=up.fragment.subtree(q(),p,{origin:b})),n.sequence(ae.map(X))}function Q(p,b,H){b=n.options(b),p=B(p);let Y=new up.OptionsParser(p,b,H);Y.string("contentType",{attr:"enctype"}),Y.json("headers");let q=up.Params.fromForm(p),ae=b.submitButton??(b.submitButton=o(p)[0]);return ae&&(q.addField(ae),b.method||(b.method=ae.getAttribute("formmethod")),b.url||(b.url=ae.getAttribute("formaction"))),q.addAll(b.params),b.params=q,Y.string("url",{attr:"action",default:up.fragment.source(p)}),Y.string("method",{attr:["up-method","data-method","method"],default:"GET",normalize:n.normalizeMethod}),b.method==="GET"&&(b.url=up.Params.stripURL(b.url)),b}function ee(p,...b){p=up.element.get(p);let H=n.extractCallback(b)||$(p)||up.fail("No callback given for up.watch()"),Y=n.extractOptions(b),q=new up.FieldWatcher(p,Y,H);return q.start(),()=>q.stop()}function $(p){let b=p.getAttribute("up-watch");if(b)return up.NonceableCallback.fromString(b).toFunction("value","name").bind(p)}function P(p,b={}){return ee(p,{options:b,batch:!0},(Y,q)=>m(p,q))}function E(){return up.migrate.migratedFormGroupSelectors?.()||r.groupSelectors}function v(p){return F(p).element}function F(p){return n.findResult(E(),function(b){let H=p.closest(b);if(H){let Y=up.fragment.tryToTarget(H),q=up.fragment.tryToTarget(p),ae=q&&H!==p&&`${b}:has(${q})`,A=Y||ae;if(A)return{target:A,element:H,origin:p}}})}function w(...p){let b=C(...p);return up.FormValidator.forElement(b.origin).validate(b)}function C(p,...b){let H=n.extractOptions(b);return H.origin?H.target||(H.target=up.fragment.toTarget(p)):H.origin||(H.origin=up.fragment.get(p)),H}function I(p){let b,H;if(p.matches("input[type=checkbox]"))p.checked?(b=p.value,H=":checked"):H=":unchecked";else if(p.matches("input[type=radio]")){let q=_(p),ae=p.getAttribute("name"),A=q.querySelector(`input[type=radio]${a.attrSelector("name",ae)}:checked`);A?(H=":checked",b=A.value):H=":unchecked"}else b=p.value;let Y=[];return n.isPresent(b)?(Y.push(b),Y.push(":present")):Y.push(":blank"),n.isPresent(H)&&Y.push(H),Y}function Z(p,b={}){let H=b.target||b.target||p.getAttribute("up-switch"),Y=_(p);H||up.fail("No switch target given for %o",p);let q=I(p);for(let ae of up.fragment.all(Y,H))te(ae,q)}let te=up.mockable(function(p,b){let H;b||(b=I(S(p)));let Y=p.getAttribute("up-hide-for");if(Y)Y=re(Y),H=n.intersect(b,Y).length===0;else{let q=p.getAttribute("up-show-for");q=q?re(q):[":present",":checked"],H=n.intersect(b,q).length>0}a.toggle(p,H),p.classList.add("up-switched")});function re(p){return n.parseTokens(p,{json:!0})}function S(p){let H=_(p).querySelectorAll("[up-switch]");return n.find(H,function(q){let ae=q.getAttribute("up-switch");return p.matches(ae)})||up.fail("Could not find [up-switch] field for %o",p)}function B(p,b={}){let H=up.fragment.get(p,b);return H.form||H.closest("form")}function _(p,b){return B(p,b)||up.layer.get(p).element}function x(){return n.presence(document.activeElement,t)}function G(p){return p=up.fragment.get(p),r.matches(p,"submitSelectors")}up.on("submit",r.selectorFn("submitSelectors"),function(p,b){if(p.defaultPrevented)return;let H=n.presence(p.submitter,u);up.event.halt(p,{log:!0}),up.error.muteUncriticalRejection(m(b,{submitButton:H}))}),up.compiler(T,function(p){up.FormValidator.forElement(p).watchContainer(p)});function T(){let p=r.fieldSelectors.map(H=>`${H}[up-validate], [up-validate] ${H}`),b=["[up-validate=false]"];return a.unionSelector(p,b)}return up.compiler("[up-switch]",p=>{Z(p)}),up.on("change","[up-switch]",(p,b)=>{Z(b)}),up.compiler("[up-show-for]:not(.up-switched), [up-hide-for]:not(.up-switched)",p=>{te(p)}),up.attribute("up-watch",p=>ee(p)),up.attribute("up-autosubmit",p=>P(p)),{config:r,submit:m,submitOptions:L,destinationOptions:Q,watchOptions:N,isSubmittable:G,watch:ee,validate:w,autosubmit:P,fieldSelector:e,fields:i,isField:t,submitButtons:o,focusedField:x,switchTarget:te,disableWhile:R,disable:X,group:v,groupSolution:F,groupSelectors:E,get:B,getScope:_}}(),up.submit=up.form.submit,up.watch=up.form.watch,up.autosubmit=up.form.autosubmit,up.validate=up.form.validate},()=>{up.feedback=function(){let n=up.util,a=up.element,r=new up.Config(()=>({currentClasses:["up-current"],navSelectors:["[up-nav]","nav"],noNavSelectors:["[up-nav=false]"]}));function e(){up.layer.root.feedbackLocation=null}let t="up-active",i="up-loading",o="a, [up-href]";function u(R){return R.upFeedbackURLs||(R.upFeedbackURLs=new up.LinkFeedbackURLs(R))}function g(R,{layer:U}={}){U||(U=up.layer.get(R));let Q=m(U),ee=r.selector("navSelectors"),$=`${ee} :is(${o}), ${ee}:is(${o})`,P=up.fragment.all($,{layer:U});for(let E of P){let v=u(E).isCurrent(Q);for(let F of r.currentClasses)E.classList.toggle(F,v);a.toggleAttr(E,"aria-current","page",v)}}function m(R){return R.feedbackLocation||n.matchableURL(R.location)}function L(R){return a.ancestor(R,o)||R}function N(R,U){if(!U.feedback)return;let Q=$=>n.always(R,$),ee=X(R);ee&&Q(a.addTemporaryClass(ee,t));for(let $ of R.fragments)Q(a.addTemporaryClass($,i))}function X(R){let U=R.origin;if(U)return L(U)}function V(R){let U=R.feedbackLocation,Q=m(R.location);(!U||U!==Q)&&(R.feedbackLocation=Q,g(R.element,{layer:R}))}function J(){let R=up.layer.front;R.showsLiveHistory()&&V(R)}return up.on("up:location:changed",R=>{J()}),up.on("up:fragment:compile",(R,U)=>{g(U)}),up.on("up:layer:location:changed",R=>{V(R.layer)}),up.on("up:framework:reset",e),{config:r,showAroundRequest:N}}()},()=>{up.radio=function(){let n=up.element,a=new up.Config(()=>({hungrySelectors:["[up-hungry]"],noHungrySelectors:["[up-hungry=false]"],pollInterval:3e4}));function r(o){let{useHungry:u,origin:g,layer:m}=o,L={current:[],other:[]};if(!u)return L;let N=a.selector("hungrySelectors"),X=[m,...m.ancestors,...m.descendants];for(let V of X){let J=up.fragment.all(V.element,N,{layer:V});for(let R of J){let U=up.fragment.tryToTarget(R,{origin:g});if(!U){up.warn("[up-hungry]","Ignoring untargetable fragment %o",R);continue}let Q=n.attr(R,"up-if-layer"),ee=Q?up.layer.getAll(Q,{baseLayer:V}):[V],$=up.motion.motionOptions(R),P=up.event.build("up:fragment:hungry",{log:!1}),E=n.callbackAttr(R,"up-on-hungry",{exposedKeys:["newFragment","renderOptions"]}),v={selector:U,oldElement:R,layer:V,origin:g,...$,placement:"swap",useKeep:!0,maybe:!0,selectEvent:P,selectCallback:E,originalRenderOptions:o};ee.includes(m)&&(m===V?L.current:L.other).push(v)}}return L.other=up.fragment.compressNestedSteps(L.other),L}function e(o,u={}){up.FragmentPolling.forFragment(o).forceStart(u)}function t(o){up.FragmentPolling.forFragment(o).forceStop()}function i(o,u={}){let g={background:!0},m=new up.OptionsParser(o,u,{defaults:g});return m.number("interval",{default:a.pollInterval}),m.string("ifLayer",{default:"front"}),m.include(up.link.requestOptions),u}return up.attribute("up-poll",function(o){up.FragmentPolling.forFragment(o).onPollAttributeObserved()}),up.macro("[up-flashes]",function(o){n.setMissingAttrs(o,{"up-hungry":"","up-if-layer":"subtree","up-keep":"",role:"alert"}),o.addEventListener("up:fragment:keep",function(u){n.isEmpty(u.newFragment)||u.preventDefault()})}),{config:a,hungrySteps:r,startPolling:e,stopPolling:t,pollOptions:i}}()},()=>{(function(){let n=up.element;function a(){return window.Rails||window.jQuery?.rails}for(let r of["method","confirm"]){let e=`up-${r}`,t=`data-${r}`;up.macro(`a[${t}]`,function(i){a()&&up.link.isFollowable(i)&&(n.setMissingAttr(i,e,i.getAttribute(t)),i.removeAttribute(t))})}})()}],He={};function O(n){var a=He[n];if(a!==void 0)return a.exports;var r=He[n]={exports:{}};return We[n](r,r.exports,O),r.exports}O.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var yt={};O(1),O(2),O(3),O(4),O(5),O(6),O(7),O(9),O(10),O(11),O(12),O(13),O(14),O(15),O(16),O(17),O(18),O(19),O(20),O(21),O(22),O(23),O(24),O(25),O(26),O(27),O(28),O(29),O(30),O(31),O(32),O(33),O(34),O(35),O(36),O(37),O(38),O(39),O(40),O(41),O(42),O(43),O(44),O(45),O(46),O(47),O(48),O(49),O(50),O(51),O(52),O(53),O(54),O(55),O(56),O(57),O(58),O(59),O(60),O(61),O(62),O(63),O(64),O(65),O(66),O(67),O(68),O(69),O(70),O(71),O(72),O(73),O(74),O(75),O(76),O(77),O(78),O(79),O(80),O(81),O(82),O(83),O(84),O(85),O(86),O(88),O(90),O(91),O(93),O(95),O(97),O(98),O(99),O(100),up.framework.onEvaled()})();var Mr=window.up;})();
//# sourceMappingURL=app.js.map
